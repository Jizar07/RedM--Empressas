"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/webhook/channel-messages/route";
exports.ids = ["app/api/webhook/channel-messages/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_jizar_OneDrive_Documents_DiscordBot_frontend_app_api_webhook_channel_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/webhook/channel-messages/route.ts */ \"(rsc)/./app/api/webhook/channel-messages/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/webhook/channel-messages/route\",\n        pathname: \"/api/webhook/channel-messages\",\n        filename: \"route\",\n        bundlePath: \"app/api/webhook/channel-messages/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\jizar\\\\OneDrive\\\\Documents\\\\DiscordBot\\\\frontend\\\\app\\\\api\\\\webhook\\\\channel-messages\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_jizar_OneDrive_Documents_DiscordBot_frontend_app_api_webhook_channel_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/webhook/channel-messages/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJob29rJTJGY2hhbm5lbC1tZXNzYWdlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGd2ViaG9vayUyRmNoYW5uZWwtbWVzc2FnZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ3ZWJob29rJTJGY2hhbm5lbC1tZXNzYWdlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqaXphciU1Q09uZURyaXZlJTVDRG9jdW1lbnRzJTVDRGlzY29yZEJvdCU1Q2Zyb250ZW5kJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNqaXphciU1Q09uZURyaXZlJTVDRG9jdW1lbnRzJTVDRGlzY29yZEJvdCU1Q2Zyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRDtBQUN2STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3JlZG0tZGFzaGJvYXJkLz83YjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGppemFyXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxEaXNjb3JkQm90XFxcXGZyb250ZW5kXFxcXGFwcFxcXFxhcGlcXFxcd2ViaG9va1xcXFxjaGFubmVsLW1lc3NhZ2VzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3dlYmhvb2svY2hhbm5lbC1tZXNzYWdlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGppemFyXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxEaXNjb3JkQm90XFxcXGZyb250ZW5kXFxcXGFwcFxcXFxhcGlcXFxcd2ViaG9va1xcXFxjaGFubmVsLW1lc3NhZ2VzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/webhook/channel-messages/route.ts":
/*!***************************************************!*\
  !*** ./app/api/webhook/channel-messages/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// CORS headers\nconst corsHeaders = {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n    \"Access-Control-Allow-Headers\": \"Content-Type, Origin, Accept\",\n    \"Access-Control-Max-Age\": \"86400\"\n};\nfunction withCors(response) {\n    Object.entries(corsHeaders).forEach(([key, value])=>{\n        response.headers.set(key, value);\n    });\n    return response;\n}\n// Store messages in a JSON file in the public directory\nconst MESSAGES_FILE = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"discord-messages.json\");\n// Ensure the public directory exists\nfunction ensurePublicDirectory() {\n    const publicDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(publicDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(publicDir, {\n            recursive: true\n        });\n    }\n}\n// Read existing messages from file\nfunction readMessages() {\n    try {\n        ensurePublicDirectory();\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(MESSAGES_FILE)) {\n            return [];\n        }\n        const fileContent = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(MESSAGES_FILE, \"utf-8\");\n        const data = JSON.parse(fileContent);\n        return Array.isArray(data.messages) ? data.messages : [];\n    } catch (error) {\n        console.error(\"Error reading messages file:\", error);\n        return [];\n    }\n}\n// Write messages to file\nfunction writeMessages(messages) {\n    try {\n        ensurePublicDirectory();\n        const data = {\n            lastUpdated: new Date().toISOString(),\n            totalMessages: messages.length,\n            messages: messages\n        };\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(MESSAGES_FILE, JSON.stringify(data, null, 2));\n        console.log(`✅ Saved ${messages.length} messages to discord-messages.json`);\n    } catch (error) {\n        console.error(\"Error writing messages file:\", error);\n        throw error;\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        if (!body.channelId || !Array.isArray(body.messages)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid payload format\"\n            }, {\n                status: 400\n            });\n        }\n        // Read existing messages\n        const existingMessages = readMessages();\n        const existingIds = new Set(existingMessages.map((msg)=>msg.id));\n        // Filter out duplicates\n        const newMessages = body.messages.filter((msg)=>!existingIds.has(msg.id));\n        if (newMessages.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"No new messages to process\",\n                total: existingMessages.length\n            });\n        }\n        // Merge with existing messages\n        const allMessages = [\n            ...existingMessages,\n            ...newMessages\n        ];\n        // Keep only the most recent 1000 messages to prevent file from growing too large\n        const recentMessages = allMessages.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, 1000);\n        // Write to file\n        writeMessages(recentMessages);\n        console.log(`📝 Processed ${newMessages.length} new messages from channel ${body.channelId}`);\n        // Create a simple notification mechanism using a timestamp file\n        // This will allow the frontend to detect when new data is available\n        const notificationFile = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"last-update.json\");\n        try {\n            const updateInfo = {\n                lastUpdate: new Date().toISOString(),\n                newMessages: newMessages.length,\n                totalMessages: recentMessages.length,\n                timestamp: Date.now() // Add timestamp for easier comparison\n            };\n            fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(notificationFile, JSON.stringify(updateInfo));\n            console.log(\"\\uD83D\\uDCE1 Created update notification for frontend\");\n        } catch (error) {\n            console.warn(\"Could not write notification file:\", error);\n        }\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: `Processed ${newMessages.length} new messages`,\n            newMessages: newMessages.length,\n            total: recentMessages.length,\n            lastUpdate: new Date().toISOString()\n        }));\n    } catch (error) {\n        console.error(\"Error processing webhook:\", error);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        }));\n    }\n}\nfunction OPTIONS(request) {\n    return withCors(new Response(null, {\n        status: 200\n    }));\n}\n// Discord message parser - converts raw messages to activity data\nfunction parseDiscordMessage(message) {\n    try {\n        const content = message.content.trim();\n        // Parse Spidey Bot messages for farm activities\n        const spideyBotMatch = content.match(/REGISTRO - fazenda_86(.+?)Autor:(.+?)\\s*\\|\\s*FIXO:\\s*(\\d+)/s);\n        if (spideyBotMatch) {\n            const actionPart = spideyBotMatch[1].trim();\n            const autor = spideyBotMatch[2].trim();\n            // Parse INSERIR ITEM (add item)\n            const addMatch = actionPart.match(/INSERIR ITEM\\s*Item adicionado:\\s*(.+?)\\s*x(\\d+)/);\n            if (addMatch) {\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"adicionar\",\n                    categoria: \"inventario\",\n                    item: addMatch[1].trim(),\n                    quantidade: parseInt(addMatch[2]),\n                    autor: autor,\n                    displayText: `${autor} adicionou ${addMatch[2]}x ${addMatch[1]}`\n                };\n            }\n            // Parse REMOVER ITEM (remove item)  \n            const removeMatch = actionPart.match(/REMOVER ITEM\\s*Item removido:\\s*(.+?)\\s*x(\\d+)/);\n            if (removeMatch) {\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"remover\",\n                    categoria: \"inventario\",\n                    item: removeMatch[1].trim(),\n                    quantidade: parseInt(removeMatch[2]),\n                    autor: autor,\n                    displayText: `${autor} removeu ${removeMatch[2]}x ${removeMatch[1]}`\n                };\n            }\n            // Parse DEPÓSITO (deposit money) - Two formats\n            // Format 1: With \"Ação:\" (for sales/actions)\n            const depositWithActionMatch = actionPart.match(/DEPÓSITO\\s*Valor depositado:\\s*\\$([0-9,.]+)\\s*Ação:(.+?)Saldo após depósito:\\s*\\$([0-9,.]+)/);\n            if (depositWithActionMatch) {\n                const valor = parseFloat(depositWithActionMatch[1].replace(\",\", \"\"));\n                const acao = depositWithActionMatch[2].trim();\n                const saldo = parseFloat(depositWithActionMatch[3].replace(\",\", \"\"));\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"venda\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: autor,\n                    descricao: acao,\n                    displayText: `${autor} ${acao} por $${valor.toFixed(2)}`,\n                    confidence: \"high\"\n                };\n            }\n            // Format 2: Direct deposit (no action, just Autor) - must NOT contain \"Ação:\"\n            const depositDirectMatch = actionPart.match(/DEPÓSITO\\s*Valor depositado:\\s*\\$([0-9,.]+)(?!.*Ação:)/);\n            if (depositDirectMatch) {\n                const valor = parseFloat(depositDirectMatch[1].replace(\",\", \"\"));\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"deposito\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: autor,\n                    descricao: `Depósito direto`,\n                    displayText: `${autor} depositou $${valor.toFixed(2)}`,\n                    confidence: \"high\"\n                };\n            }\n            // Parse SAQUE (withdraw money)\n            const withdrawMatch = actionPart.match(/SAQUE\\s*Valor sacado:\\s*\\$([0-9,.]+).*?Autor:(.+?)\\s*\\|\\s*FIXO.*?Saldo após saque:\\s*\\$([0-9,.]+)/s);\n            if (withdrawMatch) {\n                const valor = parseFloat(withdrawMatch[1].replace(\",\", \"\"));\n                const autorSaque = withdrawMatch[2].trim();\n                const saldo = parseFloat(withdrawMatch[3].replace(\",\", \"\"));\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"saque\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: autorSaque,\n                    descricao: `Saque de $${valor.toFixed(2)}`,\n                    displayText: `${autorSaque} sacou $${valor.toFixed(2)}`\n                };\n            }\n        }\n        // Try to parse other message formats (fallback patterns)\n        const itemAddPattern = /(?:Item adicionado|adicionou):\\s*(.+?)\\s*x(\\d+)/i;\n        const itemRemovePattern = /(?:Item removido|removeu):\\s*(.+?)\\s*x(\\d+)/i;\n        const moneyPattern = /\\$([0-9,.]+)/;\n        const addMatch = content.match(itemAddPattern);\n        if (addMatch) {\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: \"adicionar\",\n                categoria: \"inventario\",\n                item: addMatch[1].trim(),\n                quantidade: parseInt(addMatch[2]),\n                autor: message.author || \"Sistema\",\n                displayText: `${message.author} adicionou ${addMatch[2]}x ${addMatch[1]}`\n            };\n        }\n        const removeMatch = content.match(itemRemovePattern);\n        if (removeMatch) {\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: \"remover\",\n                categoria: \"inventario\",\n                item: removeMatch[1].trim(),\n                quantidade: parseInt(removeMatch[2]),\n                autor: message.author || \"Sistema\",\n                displayText: `${message.author} removeu ${removeMatch[2]}x ${removeMatch[1]}`\n            };\n        }\n        // Parse SAQUE (withdrawal) messages - format: Zero Bala sacou $2000 do caixa\n        if (content.includes(\"SAQUE\") && content.includes(\"Valor sacado:\")) {\n            const valorMatch = content.match(/Valor sacado:\\s*\\$([0-9,.]+)/);\n            const autorMatch = content.match(/Autor:(.+?)\\s*\\|/);\n            if (valorMatch && autorMatch) {\n                const valor = parseFloat(valorMatch[1].replace(\",\", \"\"));\n                const autorSaque = autorMatch[1].trim();\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"saque\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: autorSaque,\n                    descricao: `Saque de $${valor.toFixed(2)}`,\n                    displayText: `sacou do caixa`\n                };\n            }\n        }\n        // Parse DEPÓSITO (deposit) messages - format: jack sparrow vendeu 4 animais no matadouro por $160\n        if (content.includes(\"DEP\\xd3SITO\") && content.includes(\"Valor depositado:\")) {\n            const valorMatch = content.match(/Valor depositado:\\s*\\$([0-9,.]+)/);\n            const acaoMatch = content.match(/Ação:(.+?)Saldo após depósito:/);\n            if (valorMatch && acaoMatch) {\n                const valor = parseFloat(valorMatch[1].replace(\",\", \"\"));\n                const acao = acaoMatch[1].trim();\n                // Extract author from action \"jack sparrow vendeu 4 animais no matadouro\"\n                const vendeuMatch = acao.match(/^(.+?)\\s+vendeu\\s+(\\d+)\\s+animais\\s+no\\s+matadouro/);\n                if (vendeuMatch) {\n                    const autorDeposito = vendeuMatch[1].trim();\n                    const quantidade = vendeuMatch[2];\n                    return {\n                        ...message,\n                        parseSuccess: true,\n                        tipo: \"deposito\",\n                        categoria: \"financeiro\",\n                        valor: valor,\n                        autor: autorDeposito,\n                        descricao: `Vendeu ${quantidade} animais no matadouro`,\n                        displayText: `vendeu ${quantidade} animais no matadouro por`\n                    };\n                }\n                // Fallback for other deposit actions\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"deposito\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: \"Sistema\",\n                    descricao: acao,\n                    displayText: `Sistema depositou $${valor.toFixed(2)} no caixa`\n                };\n            }\n        }\n        const moneyMatch = content.match(moneyPattern);\n        if (moneyMatch && (content.toLowerCase().includes(\"deposit\") || content.toLowerCase().includes(\"saque\") || content.toLowerCase().includes(\"vendeu\"))) {\n            const valor = parseFloat(moneyMatch[1].replace(\",\", \"\"));\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: content.toLowerCase().includes(\"saque\") ? \"saque\" : \"deposito\",\n                categoria: \"financeiro\",\n                valor: valor,\n                autor: message.author || \"Sistema\",\n                displayText: content.substring(0, 100)\n            };\n        }\n        // Return unparsed message\n        return {\n            ...message,\n            parseSuccess: false,\n            categoria: \"sistema\",\n            displayText: content.substring(0, 100)\n        };\n    } catch (error) {\n        console.error(\"Parse error:\", error);\n        return {\n            ...message,\n            parseSuccess: false,\n            categoria: \"sistema\",\n            displayText: message.content.substring(0, 100)\n        };\n    }\n}\nasync function GET(request) {\n    try {\n        const messages = readMessages();\n        // Parse all messages and return parsed activities\n        const parsedMessages = messages.map(parseDiscordMessage);\n        console.log(`📊 Parsed ${parsedMessages.length} messages, ${parsedMessages.filter((m)=>m.parseSuccess).length} successfully parsed`);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            messages: parsedMessages,\n            total: parsedMessages.length,\n            lastUpdated: messages.length > 0 ? messages[0]?.timestamp : null,\n            parsed: parsedMessages.filter((m)=>m.parseSuccess).length\n        }));\n    } catch (error) {\n        console.error(\"Error reading messages:\", error);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to read messages\"\n        }, {\n            status: 500\n        }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3dlYmhvb2svY2hhbm5lbC1tZXNzYWdlcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3RDtBQUNwQztBQUNJO0FBaUJ4QixlQUFlO0FBQ2YsTUFBTUcsY0FBYztJQUNsQiwrQkFBK0I7SUFDL0IsZ0NBQWdDO0lBQ2hDLGdDQUFnQztJQUNoQywwQkFBMEI7QUFDNUI7QUFFQSxTQUFTQyxTQUFTQyxRQUFrQjtJQUNsQ0MsT0FBT0MsT0FBTyxDQUFDSixhQUFhSyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQy9DTCxTQUFTTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsS0FBS0M7SUFDNUI7SUFDQSxPQUFPTDtBQUNUO0FBRUEsd0RBQXdEO0FBQ3hELE1BQU1RLGdCQUFnQlgsZ0RBQVMsQ0FBQ2EsUUFBUUMsR0FBRyxJQUFJLFVBQVU7QUFFekQscUNBQXFDO0FBQ3JDLFNBQVNDO0lBQ1AsTUFBTUMsWUFBWWhCLGdEQUFTLENBQUNhLFFBQVFDLEdBQUcsSUFBSTtJQUMzQyxJQUFJLENBQUNmLG9EQUFhLENBQUNpQixZQUFZO1FBQzdCakIsbURBQVksQ0FBQ2lCLFdBQVc7WUFBRUcsV0FBVztRQUFLO0lBQzVDO0FBQ0Y7QUFFQSxtQ0FBbUM7QUFDbkMsU0FBU0M7SUFDUCxJQUFJO1FBQ0ZMO1FBRUEsSUFBSSxDQUFDaEIsb0RBQWEsQ0FBQ1ksZ0JBQWdCO1lBQ2pDLE9BQU8sRUFBRTtRQUNYO1FBRUEsTUFBTVUsY0FBY3RCLHNEQUFlLENBQUNZLGVBQWU7UUFDbkQsTUFBTVksT0FBT0MsS0FBS0MsS0FBSyxDQUFDSjtRQUN4QixPQUFPSyxNQUFNQyxPQUFPLENBQUNKLEtBQUtLLFFBQVEsSUFBSUwsS0FBS0ssUUFBUSxHQUFHLEVBQUU7SUFDMUQsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU8sRUFBRTtJQUNYO0FBQ0Y7QUFFQSx5QkFBeUI7QUFDekIs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QkFBb0IsQ0FBQztRQUVuSSxPQUFPbEMsU0FBU0oscURBQVlBLENBQUM2QyxJQUFJLENBQUM7WUFDaENFLFNBQVM7WUFDVGpCLFVBQVV1RjtZQUNWMUQsT0FBTzBELGVBQWUvRSxNQUFNO1lBQzVCSixhQUFhSixTQUFTUSxNQUFNLEdBQUcsSUFBSVIsUUFBUSxDQUFDLEVBQUUsRUFBRW1DLFlBQVk7WUFDNURzRCxRQUFRRixlQUFlN0QsTUFBTSxDQUFDOEQsQ0FBQUEsSUFBS0EsRUFBRW5DLFlBQVksRUFBRTdDLE1BQU07UUFDM0Q7SUFFRixFQUFFLE9BQU9QLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTzNCLFNBQVNKLHFEQUFZQSxDQUFDNkMsSUFBSSxDQUMvQjtZQUFFRSxTQUFTO1lBQU9oQixPQUFPO1FBQTBCLEdBQ25EO1lBQUVpQixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3JlZG0tZGFzaGJvYXJkLy4vYXBwL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXMvcm91dGUudHM/M2I4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbnRlcmZhY2UgTWVzc2FnZURhdGEge1xuICBpZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgZGlzY29yZFRpbWVzdGFtcD86IHN0cmluZztcbiAgYXV0aG9yOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgY2hhbm5lbElkOiBzdHJpbmc7XG4gIHNvdXJjZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgV2ViaG9va1BheWxvYWQge1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgbWVzc2FnZXM6IE1lc3NhZ2VEYXRhW107XG59XG5cbi8vIENPUlMgaGVhZGVyc1xuY29uc3QgY29yc0hlYWRlcnMgPSB7XG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgT3JpZ2luLCBBY2NlcHQnLFxuICAnQWNjZXNzLUNvbnRyb2wtTWF4LUFnZSc6ICc4NjQwMCcsXG59O1xuXG5mdW5jdGlvbiB3aXRoQ29ycyhyZXNwb25zZTogUmVzcG9uc2UpIHtcbiAgT2JqZWN0LmVudHJpZXMoY29yc0hlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vLyBTdG9yZSBtZXNzYWdlcyBpbiBhIEpTT04gZmlsZSBpbiB0aGUgcHVibGljIGRpcmVjdG9yeVxuY29uc3QgTUVTU0FHRVNfRklMRSA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2Rpc2NvcmQtbWVzc2FnZXMuanNvbicpO1xuXG4vLyBFbnN1cmUgdGhlIHB1YmxpYyBkaXJlY3RvcnkgZXhpc3RzXG5mdW5jdGlvbiBlbnN1cmVQdWJsaWNEaXJlY3RvcnkoKSB7XG4gIGNvbnN0IHB1YmxpY0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJyk7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwdWJsaWNEaXIpKSB7XG4gICAgZnMubWtkaXJTeW5jKHB1YmxpY0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH1cbn1cblxuLy8gUmVhZCBleGlzdGluZyBtZXNzYWdlcyBmcm9tIGZpbGVcbmZ1bmN0aW9uIHJlYWRNZXNzYWdlcygpOiBNZXNzYWdlRGF0YVtdIHtcbiAgdHJ5IHtcbiAgICBlbnN1cmVQdWJsaWNEaXJlY3RvcnkoKTtcbiAgICBcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoTUVTU0FHRVNfRklMRSkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoTUVTU0FHRVNfRklMRSwgJ3V0Zi04Jyk7XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGRhdGEubWVzc2FnZXMpID8gZGF0YS5tZXNzYWdlcyA6IFtdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgbWVzc2FnZXMgZmlsZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vIFdyaXRlIG1lc3NhZ2VzIHRvIGZpbGVcbmZ1bmN0aW9uIHdyaXRlTWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VEYXRhW10pIHtcbiAgdHJ5IHtcbiAgICBlbnN1cmVQdWJsaWNEaXJlY3RvcnkoKTtcbiAgICBcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHRvdGFsTWVzc2FnZXM6IG1lc3NhZ2VzLmxlbmd0aCxcbiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1xuICAgIH07XG4gICAgXG4gICAgZnMud3JpdGVGaWxlU3luYyhNRVNTQUdFU19GSUxFLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coYOKchSBTYXZlZCAke21lc3NhZ2VzLmxlbmd0aH0gbWVzc2FnZXMgdG8gZGlzY29yZC1tZXNzYWdlcy5qc29uYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBtZXNzYWdlcyBmaWxlOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHk6IFdlYmhvb2tQYXlsb2FkID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgaWYgKCFib2R5LmNoYW5uZWxJZCB8fCAhQXJyYXkuaXNBcnJheShib2R5Lm1lc3NhZ2VzKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgcGF5bG9hZCBmb3JtYXQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZWFkIGV4aXN0aW5nIG1lc3NhZ2VzXG4gICAgY29uc3QgZXhpc3RpbmdNZXNzYWdlcyA9IHJlYWRNZXNzYWdlcygpO1xuICAgIGNvbnN0IGV4aXN0aW5nSWRzID0gbmV3IFNldChleGlzdGluZ01lc3NhZ2VzLm1hcChtc2cgPT4gbXNnLmlkKSk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGR1cGxpY2F0ZXNcbiAgICBjb25zdCBuZXdNZXNzYWdlcyA9IGJvZHkubWVzc2FnZXMuZmlsdGVyKG1zZyA9PiAhZXhpc3RpbmdJZHMuaGFzKG1zZy5pZCkpO1xuICAgIFxuICAgIGlmIChuZXdNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdObyBuZXcgbWVzc2FnZXMgdG8gcHJvY2VzcycsXG4gICAgICAgIHRvdGFsOiBleGlzdGluZ01lc3NhZ2VzLmxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyBtZXNzYWdlc1xuICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gWy4uLmV4aXN0aW5nTWVzc2FnZXMsIC4uLm5ld01lc3NhZ2VzXTtcbiAgICBcbiAgICAvLyBLZWVwIG9ubHkgdGhlIG1vc3QgcmVjZW50IDEwMDAgbWVzc2FnZXMgdG8gcHJldmVudCBmaWxlIGZyb20gZ3Jvd2luZyB0b28gbGFyZ2VcbiAgICBjb25zdCByZWNlbnRNZXNzYWdlcyA9IGFsbE1lc3NhZ2VzXG4gICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudGltZXN0YW1wKS5nZXRUaW1lKCkpXG4gICAgICAuc2xpY2UoMCwgMTAwMCk7XG5cbiAgICAvLyBXcml0ZSB0byBmaWxlXG4gICAgd3JpdGVNZXNzYWdlcyhyZWNlbnRNZXNzYWdlcyk7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TnSBQcm9jZXNzZWQgJHtuZXdNZXNzYWdlcy5sZW5ndGh9IG5ldyBtZXNzYWdlcyBmcm9tIGNoYW5uZWwgJHtib2R5LmNoYW5uZWxJZH1gKTtcblxuICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBub3RpZmljYXRpb24gbWVjaGFuaXNtIHVzaW5nIGEgdGltZXN0YW1wIGZpbGVcbiAgICAvLyBUaGlzIHdpbGwgYWxsb3cgdGhlIGZyb250ZW5kIHRvIGRldGVjdCB3aGVuIG5ldyBkYXRhIGlzIGF2YWlsYWJsZVxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbkZpbGUgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdsYXN0LXVwZGF0ZS5qc29uJyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZUluZm8gPSB7XG4gICAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbmV3TWVzc2FnZXM6IG5ld01lc3NhZ2VzLmxlbmd0aCxcbiAgICAgICAgdG90YWxNZXNzYWdlczogcmVjZW50TWVzc2FnZXMubGVuZ3RoLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLy8gQWRkIHRpbWVzdGFtcCBmb3IgZWFzaWVyIGNvbXBhcmlzb25cbiAgICAgIH07XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKG5vdGlmaWNhdGlvbkZpbGUsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZUluZm8pKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OhIENyZWF0ZWQgdXBkYXRlIG5vdGlmaWNhdGlvbiBmb3IgZnJvbnRlbmQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3Qgd3JpdGUgbm90aWZpY2F0aW9uIGZpbGU6JywgZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogYFByb2Nlc3NlZCAke25ld01lc3NhZ2VzLmxlbmd0aH0gbmV3IG1lc3NhZ2VzYCxcbiAgICAgIG5ld01lc3NhZ2VzOiBuZXdNZXNzYWdlcy5sZW5ndGgsXG4gICAgICB0b3RhbDogcmVjZW50TWVzc2FnZXMubGVuZ3RoLFxuICAgICAgbGFzdFVwZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSkpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyB3ZWJob29rOicsIGVycm9yKTtcbiAgICByZXR1cm4gd2l0aENvcnMoTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBPUFRJT05TKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHJldHVybiB3aXRoQ29ycyhuZXcgUmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDIwMCB9KSk7XG59XG5cbi8vIERpc2NvcmQgbWVzc2FnZSBwYXJzZXIgLSBjb252ZXJ0cyByYXcgbWVzc2FnZXMgdG8gYWN0aXZpdHkgZGF0YVxuZnVuY3Rpb24gcGFyc2VEaXNjb3JkTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlRGF0YSk6IGFueSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2UuY29udGVudC50cmltKCk7XG4gICAgXG4gICAgLy8gUGFyc2UgU3BpZGV5IEJvdCBtZXNzYWdlcyBmb3IgZmFybSBhY3Rpdml0aWVzXG4gICAgY29uc3Qgc3BpZGV5Qm90TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9SRUdJU1RSTyAtIGZhemVuZGFfODYoLis/KUF1dG9yOiguKz8pXFxzKlxcfFxccypGSVhPOlxccyooXFxkKykvcyk7XG4gICAgaWYgKHNwaWRleUJvdE1hdGNoKSB7XG4gICAgICBjb25zdCBhY3Rpb25QYXJ0ID0gc3BpZGV5Qm90TWF0Y2hbMV0udHJpbSgpO1xuICAgICAgY29uc3QgYXV0b3IgPSBzcGlkZXlCb3RNYXRjaFsyXS50cmltKCk7XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIElOU0VSSVIgSVRFTSAoYWRkIGl0ZW0pXG4gICAgICBjb25zdCBhZGRNYXRjaCA9IGFjdGlvblBhcnQubWF0Y2goL0lOU0VSSVIgSVRFTVxccypJdGVtIGFkaWNpb25hZG86XFxzKiguKz8pXFxzKngoXFxkKykvKTtcbiAgICAgIGlmIChhZGRNYXRjaCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRpcG86ICdhZGljaW9uYXInLFxuICAgICAgICAgIGNhdGVnb3JpYTogJ2ludmVudGFyaW8nLFxuICAgICAgICAgIGl0ZW06IGFkZE1hdGNoWzFdLnRyaW0oKSxcbiAgICAgICAgICBxdWFudGlkYWRlOiBwYXJzZUludChhZGRNYXRjaFsyXSksXG4gICAgICAgICAgYXV0b3I6IGF1dG9yLFxuICAgICAgICAgIGRpc3BsYXlUZXh0OiBgJHthdXRvcn0gYWRpY2lvbm91ICR7YWRkTWF0Y2hbMl19eCAke2FkZE1hdGNoWzFdfWBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyc2UgUkVNT1ZFUiBJVEVNIChyZW1vdmUgaXRlbSkgIFxuICAgICAgY29uc3QgcmVtb3ZlTWF0Y2ggPSBhY3Rpb25QYXJ0Lm1hdGNoKC9SRU1PVkVSIElURU1cXHMqSXRlbSByZW1vdmlkbzpcXHMqKC4rPylcXHMqeChcXGQrKS8pO1xuICAgICAgaWYgKHJlbW92ZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdGlwbzogJ3JlbW92ZXInLFxuICAgICAgICAgIGNhdGVnb3JpYTogJ2ludmVudGFyaW8nLFxuICAgICAgICAgIGl0ZW06IHJlbW92ZU1hdGNoWzFdLnRyaW0oKSxcbiAgICAgICAgICBxdWFudGlkYWRlOiBwYXJzZUludChyZW1vdmVNYXRjaFsyXSksXG4gICAgICAgICAgYXV0b3I6IGF1dG9yLFxuICAgICAgICAgIGRpc3BsYXlUZXh0OiBgJHthdXRvcn0gcmVtb3ZldSAke3JlbW92ZU1hdGNoWzJdfXggJHtyZW1vdmVNYXRjaFsxXX1gXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIERFUMOTU0lUTyAoZGVwb3NpdCBtb25leSkgLSBUd28gZm9ybWF0c1xuICAgICAgLy8gRm9ybWF0IDE6IFdpdGggXCJBw6fDo286XCIgKGZvciBzYWxlcy9hY3Rpb25zKVxuICAgICAgY29uc3QgZGVwb3NpdFdpdGhBY3Rpb25NYXRjaCA9IGFjdGlvblBhcnQubWF0Y2goL0RFUMOTU0lUT1xccypWYWxvciBkZXBvc2l0YWRvOlxccypcXCQoWzAtOSwuXSspXFxzKkHDp8OjbzooLis/KVNhbGRvIGFww7NzIGRlcMOzc2l0bzpcXHMqXFwkKFswLTksLl0rKS8pO1xuICAgICAgaWYgKGRlcG9zaXRXaXRoQWN0aW9uTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KGRlcG9zaXRXaXRoQWN0aW9uTWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIGNvbnN0IGFjYW8gPSBkZXBvc2l0V2l0aEFjdGlvbk1hdGNoWzJdLnRyaW0oKTtcbiAgICAgICAgY29uc3Qgc2FsZG8gPSBwYXJzZUZsb2F0KGRlcG9zaXRXaXRoQWN0aW9uTWF0Y2hbM10ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRpcG86ICd2ZW5kYScsIC8vIE1hcmsgYXMgc2FsZSByYXRoZXIgdGhhbiBnZW5lcmljIGRlcG9zaXRcbiAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcbiAgICAgICAgICB2YWxvcjogdmFsb3IsXG4gICAgICAgICAgYXV0b3I6IGF1dG9yLFxuICAgICAgICAgIGRlc2NyaWNhbzogYWNhbyxcbiAgICAgICAgICBkaXNwbGF5VGV4dDogYCR7YXV0b3J9ICR7YWNhb30gcG9yICQke3ZhbG9yLnRvRml4ZWQoMil9YCxcbiAgICAgICAgICBjb25maWRlbmNlOiAnaGlnaCdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRm9ybWF0IDI6IERpcmVjdCBkZXBvc2l0IChubyBhY3Rpb24sIGp1c3QgQXV0b3IpIC0gbXVzdCBOT1QgY29udGFpbiBcIkHDp8OjbzpcIlxuICAgICAgY29uc3QgZGVwb3NpdERpcmVjdE1hdGNoID0gYWN0aW9uUGFydC5tYXRjaCgvREVQw5NTSVRPXFxzKlZhbG9yIGRlcG9zaXRhZG86XFxzKlxcJChbMC05LC5dKykoPyEuKkHDp8OjbzopLyk7XG4gICAgICBpZiAoZGVwb3NpdERpcmVjdE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHZhbG9yID0gcGFyc2VGbG9hdChkZXBvc2l0RGlyZWN0TWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRpcG86ICdkZXBvc2l0bycsXG4gICAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXG4gICAgICAgICAgdmFsb3I6IHZhbG9yLFxuICAgICAgICAgIGF1dG9yOiBhdXRvcixcbiAgICAgICAgICBkZXNjcmljYW86IGBEZXDDs3NpdG8gZGlyZXRvYCxcbiAgICAgICAgICBkaXNwbGF5VGV4dDogYCR7YXV0b3J9IGRlcG9zaXRvdSAkJHt2YWxvci50b0ZpeGVkKDIpfWAsXG4gICAgICAgICAgY29uZmlkZW5jZTogJ2hpZ2gnXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIFNBUVVFICh3aXRoZHJhdyBtb25leSlcbiAgICAgIGNvbnN0IHdpdGhkcmF3TWF0Y2ggPSBhY3Rpb25QYXJ0Lm1hdGNoKC9TQVFVRVxccypWYWxvciBzYWNhZG86XFxzKlxcJChbMC05LC5dKykuKj9BdXRvcjooLis/KVxccypcXHxcXHMqRklYTy4qP1NhbGRvIGFww7NzIHNhcXVlOlxccypcXCQoWzAtOSwuXSspL3MpO1xuICAgICAgaWYgKHdpdGhkcmF3TWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHdpdGhkcmF3TWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIGNvbnN0IGF1dG9yU2FxdWUgPSB3aXRoZHJhd01hdGNoWzJdLnRyaW0oKTtcbiAgICAgICAgY29uc3Qgc2FsZG8gPSBwYXJzZUZsb2F0KHdpdGhkcmF3TWF0Y2hbM10ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRpcG86ICdzYXF1ZScsXG4gICAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXG4gICAgICAgICAgdmFsb3I6IHZhbG9yLFxuICAgICAgICAgIGF1dG9yOiBhdXRvclNhcXVlLFxuICAgICAgICAgIGRlc2NyaWNhbzogYFNhcXVlIGRlICQke3ZhbG9yLnRvRml4ZWQoMil9YCxcbiAgICAgICAgICBkaXNwbGF5VGV4dDogYCR7YXV0b3JTYXF1ZX0gc2Fjb3UgJCR7dmFsb3IudG9GaXhlZCgyKX1gLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgdG8gcGFyc2Ugb3RoZXIgbWVzc2FnZSBmb3JtYXRzIChmYWxsYmFjayBwYXR0ZXJucylcbiAgICBjb25zdCBpdGVtQWRkUGF0dGVybiA9IC8oPzpJdGVtIGFkaWNpb25hZG98YWRpY2lvbm91KTpcXHMqKC4rPylcXHMqeChcXGQrKS9pO1xuICAgIGNvbnN0IGl0ZW1SZW1vdmVQYXR0ZXJuID0gLyg/Okl0ZW0gcmVtb3ZpZG98cmVtb3ZldSk6XFxzKiguKz8pXFxzKngoXFxkKykvaTtcbiAgICBjb25zdCBtb25leVBhdHRlcm4gPSAvXFwkKFswLTksLl0rKS87XG4gICAgXG4gICAgY29uc3QgYWRkTWF0Y2ggPSBjb250ZW50Lm1hdGNoKGl0ZW1BZGRQYXR0ZXJuKTtcbiAgICBpZiAoYWRkTWF0Y2gpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIHBhcnNlU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGlwbzogJ2FkaWNpb25hcicsXG4gICAgICAgIGNhdGVnb3JpYTogJ2ludmVudGFyaW8nLFxuICAgICAgICBpdGVtOiBhZGRNYXRjaFsxXS50cmltKCksXG4gICAgICAgIHF1YW50aWRhZGU6IHBhcnNlSW50KGFkZE1hdGNoWzJdKSxcbiAgICAgICAgYXV0b3I6IG1lc3NhZ2UuYXV0aG9yIHx8ICdTaXN0ZW1hJyxcbiAgICAgICAgZGlzcGxheVRleHQ6IGAke21lc3NhZ2UuYXV0aG9yfSBhZGljaW9ub3UgJHthZGRNYXRjaFsyXX14ICR7YWRkTWF0Y2hbMV19YCxcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlbW92ZU1hdGNoID0gY29udGVudC5tYXRjaChpdGVtUmVtb3ZlUGF0dGVybik7XG4gICAgaWYgKHJlbW92ZU1hdGNoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRpcG86ICdyZW1vdmVyJyxcbiAgICAgICAgY2F0ZWdvcmlhOiAnaW52ZW50YXJpbycsXG4gICAgICAgIGl0ZW06IHJlbW92ZU1hdGNoWzFdLnRyaW0oKSxcbiAgICAgICAgcXVhbnRpZGFkZTogcGFyc2VJbnQocmVtb3ZlTWF0Y2hbMl0pLFxuICAgICAgICBhdXRvcjogbWVzc2FnZS5hdXRob3IgfHwgJ1Npc3RlbWEnLFxuICAgICAgICBkaXNwbGF5VGV4dDogYCR7bWVzc2FnZS5hdXRob3J9IHJlbW92ZXUgJHtyZW1vdmVNYXRjaFsyXX14ICR7cmVtb3ZlTWF0Y2hbMV19YCxcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFBhcnNlIFNBUVVFICh3aXRoZHJhd2FsKSBtZXNzYWdlcyAtIGZvcm1hdDogWmVybyBCYWxhIHNhY291ICQyMDAwIGRvIGNhaXhhXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ1NBUVVFJykgJiYgY29udGVudC5pbmNsdWRlcygnVmFsb3Igc2FjYWRvOicpKSB7XG4gICAgICBjb25zdCB2YWxvck1hdGNoID0gY29udGVudC5tYXRjaCgvVmFsb3Igc2FjYWRvOlxccypcXCQoWzAtOSwuXSspLyk7XG4gICAgICBjb25zdCBhdXRvck1hdGNoID0gY29udGVudC5tYXRjaCgvQXV0b3I6KC4rPylcXHMqXFx8Lyk7XG4gICAgICBcbiAgICAgIGlmICh2YWxvck1hdGNoICYmIGF1dG9yTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHZhbG9yTWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIGNvbnN0IGF1dG9yU2FxdWUgPSBhdXRvck1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdGlwbzogJ3NhcXVlJyxcbiAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcbiAgICAgICAgICB2YWxvcjogdmFsb3IsXG4gICAgICAgICAgYXV0b3I6IGF1dG9yU2FxdWUsXG4gICAgICAgICAgZGVzY3JpY2FvOiBgU2FxdWUgZGUgJCR7dmFsb3IudG9GaXhlZCgyKX1gLFxuICAgICAgICAgIGRpc3BsYXlUZXh0OiBgc2Fjb3UgZG8gY2FpeGFgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFBhcnNlIERFUMOTU0lUTyAoZGVwb3NpdCkgbWVzc2FnZXMgLSBmb3JtYXQ6IGphY2sgc3BhcnJvdyB2ZW5kZXUgNCBhbmltYWlzIG5vIG1hdGFkb3VybyBwb3IgJDE2MFxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCdERVDDk1NJVE8nKSAmJiBjb250ZW50LmluY2x1ZGVzKCdWYWxvciBkZXBvc2l0YWRvOicpKSB7XG4gICAgICBjb25zdCB2YWxvck1hdGNoID0gY29udGVudC5tYXRjaCgvVmFsb3IgZGVwb3NpdGFkbzpcXHMqXFwkKFswLTksLl0rKS8pO1xuICAgICAgY29uc3QgYWNhb01hdGNoID0gY29udGVudC5tYXRjaCgvQcOnw6NvOiguKz8pU2FsZG8gYXDDs3MgZGVww7NzaXRvOi8pO1xuICAgICAgXG4gICAgICBpZiAodmFsb3JNYXRjaCAmJiBhY2FvTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHZhbG9yTWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XG4gICAgICAgIGNvbnN0IGFjYW8gPSBhY2FvTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFjdCBhdXRob3IgZnJvbSBhY3Rpb24gXCJqYWNrIHNwYXJyb3cgdmVuZGV1IDQgYW5pbWFpcyBubyBtYXRhZG91cm9cIlxuICAgICAgICBjb25zdCB2ZW5kZXVNYXRjaCA9IGFjYW8ubWF0Y2goL14oLis/KVxccyt2ZW5kZXVcXHMrKFxcZCspXFxzK2FuaW1haXNcXHMrbm9cXHMrbWF0YWRvdXJvLyk7XG4gICAgICAgIGlmICh2ZW5kZXVNYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGF1dG9yRGVwb3NpdG8gPSB2ZW5kZXVNYXRjaFsxXS50cmltKCk7XG4gICAgICAgICAgY29uc3QgcXVhbnRpZGFkZSA9IHZlbmRldU1hdGNoWzJdO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgdGlwbzogJ2RlcG9zaXRvJyxcbiAgICAgICAgICAgIGNhdGVnb3JpYTogJ2ZpbmFuY2Vpcm8nLFxuICAgICAgICAgICAgdmFsb3I6IHZhbG9yLFxuICAgICAgICAgICAgYXV0b3I6IGF1dG9yRGVwb3NpdG8sXG4gICAgICAgICAgICBkZXNjcmljYW86IGBWZW5kZXUgJHtxdWFudGlkYWRlfSBhbmltYWlzIG5vIG1hdGFkb3Vyb2AsXG4gICAgICAgICAgICBkaXNwbGF5VGV4dDogYHZlbmRldSAke3F1YW50aWRhZGV9IGFuaW1haXMgbm8gbWF0YWRvdXJvIHBvcmBcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGYWxsYmFjayBmb3Igb3RoZXIgZGVwb3NpdCBhY3Rpb25zXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdGlwbzogJ2RlcG9zaXRvJyxcbiAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcbiAgICAgICAgICB2YWxvcjogdmFsb3IsXG4gICAgICAgICAgYXV0b3I6ICdTaXN0ZW1hJyxcbiAgICAgICAgICBkZXNjcmljYW86IGFjYW8sXG4gICAgICAgICAgZGlzcGxheVRleHQ6IGBTaXN0ZW1hIGRlcG9zaXRvdSAkJHt2YWxvci50b0ZpeGVkKDIpfSBubyBjYWl4YWBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtb25leU1hdGNoID0gY29udGVudC5tYXRjaChtb25leVBhdHRlcm4pO1xuICAgIGlmIChtb25leU1hdGNoICYmIChjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RlcG9zaXQnKSB8fCBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NhcXVlJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd2ZW5kZXUnKSkpIHtcbiAgICAgIGNvbnN0IHZhbG9yID0gcGFyc2VGbG9hdChtb25leU1hdGNoWzFdLnJlcGxhY2UoJywnLCAnJykpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxuICAgICAgICB0aXBvOiBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NhcXVlJykgPyAnc2FxdWUnIDogJ2RlcG9zaXRvJyxcbiAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXG4gICAgICAgIHZhbG9yOiB2YWxvcixcbiAgICAgICAgYXV0b3I6IG1lc3NhZ2UuYXV0aG9yIHx8ICdTaXN0ZW1hJyxcbiAgICAgICAgZGlzcGxheVRleHQ6IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdW5wYXJzZWQgbWVzc2FnZVxuICAgIHJldHVybiB7XG4gICAgICAuLi5tZXNzYWdlLFxuICAgICAgcGFyc2VTdWNjZXNzOiBmYWxzZSxcbiAgICAgIGNhdGVnb3JpYTogJ3Npc3RlbWEnLFxuICAgICAgZGlzcGxheVRleHQ6IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMClcbiAgICB9O1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1BhcnNlIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIHBhcnNlU3VjY2VzczogZmFsc2UsXG4gICAgICBjYXRlZ29yaWE6ICdzaXN0ZW1hJyxcbiAgICAgIGRpc3BsYXlUZXh0OiBtZXNzYWdlLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMClcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IHJlYWRNZXNzYWdlcygpO1xuICAgIFxuICAgIC8vIFBhcnNlIGFsbCBtZXNzYWdlcyBhbmQgcmV0dXJuIHBhcnNlZCBhY3Rpdml0aWVzXG4gICAgY29uc3QgcGFyc2VkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAocGFyc2VEaXNjb3JkTWVzc2FnZSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfk4ogUGFyc2VkICR7cGFyc2VkTWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlcywgJHtwYXJzZWRNZXNzYWdlcy5maWx0ZXIobSA9PiBtLnBhcnNlU3VjY2VzcykubGVuZ3RofSBzdWNjZXNzZnVsbHkgcGFyc2VkYCk7XG4gICAgXG4gICAgcmV0dXJuIHdpdGhDb3JzKE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlczogcGFyc2VkTWVzc2FnZXMsXG4gICAgICB0b3RhbDogcGFyc2VkTWVzc2FnZXMubGVuZ3RoLFxuICAgICAgbGFzdFVwZGF0ZWQ6IG1lc3NhZ2VzLmxlbmd0aCA+IDAgPyBtZXNzYWdlc1swXT8udGltZXN0YW1wIDogbnVsbCxcbiAgICAgIHBhcnNlZDogcGFyc2VkTWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5wYXJzZVN1Y2Nlc3MpLmxlbmd0aFxuICAgIH0pKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgbWVzc2FnZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIHJlYWQgbWVzc2FnZXMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJmcyIsInBhdGgiLCJjb3JzSGVhZGVycyIsIndpdGhDb3JzIiwicmVzcG9uc2UiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwiaGVhZGVycyIsInNldCIsIk1FU1NBR0VTX0ZJTEUiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImVuc3VyZVB1YmxpY0RpcmVjdG9yeSIsInB1YmxpY0RpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJyZWFkTWVzc2FnZXMiLCJmaWxlQ29udGVudCIsInJlYWRGaWxlU3luYyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsImVycm9yIiwiY29uc29sZSIsIndyaXRlTWVzc2FnZXMiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRvdGFsTWVzc2FnZXMiLCJsZW5ndGgiLCJ3cml0ZUZpbGVTeW5jIiwic3RyaW5naWZ5IiwibG9nIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImNoYW5uZWxJZCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJleGlzdGluZ01lc3NhZ2VzIiwiZXhpc3RpbmdJZHMiLCJTZXQiLCJtYXAiLCJtc2ciLCJpZCIsIm5ld01lc3NhZ2VzIiwiZmlsdGVyIiwiaGFzIiwibWVzc2FnZSIsInRvdGFsIiwiYWxsTWVzc2FnZXMiLCJyZWNlbnRNZXNzYWdlcyIsInNvcnQiLCJhIiwiYiIsInRpbWVzdGFtcCIsImdldFRpbWUiLCJzbGljZSIsIm5vdGlmaWNhdGlvbkZpbGUiLCJ1cGRhdGVJbmZvIiwibGFzdFVwZGF0ZSIsIm5vdyIsIndhcm4iLCJPUFRJT05TIiwiUmVzcG9uc2UiLCJwYXJzZURpc2NvcmRNZXNzYWdlIiwiY29udGVudCIsInRyaW0iLCJzcGlkZXlCb3RNYXRjaCIsIm1hdGNoIiwiYWN0aW9uUGFydCIsImF1dG9yIiwiYWRkTWF0Y2giLCJwYXJzZVN1Y2Nlc3MiLCJ0aXBvIiwiY2F0ZWdvcmlhIiwiaXRlbSIsInF1YW50aWRhZGUiLCJwYXJzZUludCIsImRpc3BsYXlUZXh0IiwicmVtb3ZlTWF0Y2giLCJkZXBvc2l0V2l0aEFjdGlvbk1hdGNoIiwidmFsb3IiLCJwYXJzZUZsb2F0IiwicmVwbGFjZSIsImFjYW8iLCJzYWxkbyIsImRlc2NyaWNhbyIsInRvRml4ZWQiLCJjb25maWRlbmNlIiwiZGVwb3NpdERpcmVjdE1hdGNoIiwid2l0aGRyYXdNYXRjaCIsImF1dG9yU2FxdWUiLCJpdGVtQWRkUGF0dGVybiIsIml0ZW1SZW1vdmVQYXR0ZXJuIiwibW9uZXlQYXR0ZXJuIiwiYXV0aG9yIiwiaW5jbHVkZXMiLCJ2YWxvck1hdGNoIiwiYXV0b3JNYXRjaCIsImFjYW9NYXRjaCIsInZlbmRldU1hdGNoIiwiYXV0b3JEZXBvc2l0byIsIm1vbmV5TWF0Y2giLCJ0b0xvd2VyQ2FzZSIsInN1YnN0cmluZyIsIkdFVCIsInBhcnNlZE1lc3NhZ2VzIiwibSIsInBhcnNlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webhook/channel-messages/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();