"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/webhook/channel-messages/route";
exports.ids = ["app/api/webhook/channel-messages/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_jizar_OneDrive_Documents_DiscordBot_frontend_app_api_webhook_channel_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/webhook/channel-messages/route.ts */ \"(rsc)/./app/api/webhook/channel-messages/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/webhook/channel-messages/route\",\n        pathname: \"/api/webhook/channel-messages\",\n        filename: \"route\",\n        bundlePath: \"app/api/webhook/channel-messages/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\jizar\\\\OneDrive\\\\Documents\\\\DiscordBot\\\\frontend\\\\app\\\\api\\\\webhook\\\\channel-messages\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_jizar_OneDrive_Documents_DiscordBot_frontend_app_api_webhook_channel_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/webhook/channel-messages/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJob29rJTJGY2hhbm5lbC1tZXNzYWdlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGd2ViaG9vayUyRmNoYW5uZWwtbWVzc2FnZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ3ZWJob29rJTJGY2hhbm5lbC1tZXNzYWdlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqaXphciU1Q09uZURyaXZlJTVDRG9jdW1lbnRzJTVDRGlzY29yZEJvdCU1Q2Zyb250ZW5kJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNqaXphciU1Q09uZURyaXZlJTVDRG9jdW1lbnRzJTVDRGlzY29yZEJvdCU1Q2Zyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRDtBQUN2STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3JlZG0tZGFzaGJvYXJkLz83YjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGppemFyXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxEaXNjb3JkQm90XFxcXGZyb250ZW5kXFxcXGFwcFxcXFxhcGlcXFxcd2ViaG9va1xcXFxjaGFubmVsLW1lc3NhZ2VzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3dlYmhvb2svY2hhbm5lbC1tZXNzYWdlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGppemFyXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxEaXNjb3JkQm90XFxcXGZyb250ZW5kXFxcXGFwcFxcXFxhcGlcXFxcd2ViaG9va1xcXFxjaGFubmVsLW1lc3NhZ2VzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS93ZWJob29rL2NoYW5uZWwtbWVzc2FnZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/webhook/channel-messages/route.ts":
/*!***************************************************!*\
  !*** ./app/api/webhook/channel-messages/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _sse_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sse-manager */ \"(rsc)/./app/api/webhook/sse-manager.ts\");\n\n\n\n\n// Disable static generation for this API route\nconst dynamic = \"force-dynamic\";\n// CORS headers\nconst corsHeaders = {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n    \"Access-Control-Allow-Headers\": \"Content-Type, Origin, Accept\",\n    \"Access-Control-Max-Age\": \"86400\"\n};\nfunction withCors(response) {\n    Object.entries(corsHeaders).forEach(([key, value])=>{\n        response.headers.set(key, value);\n    });\n    return response;\n}\n// Store messages in a JSON file in the public directory\nconst MESSAGES_FILE = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"discord-messages.json\");\n// Ensure the public directory exists\nfunction ensurePublicDirectory() {\n    const publicDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(publicDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(publicDir, {\n            recursive: true\n        });\n    }\n}\n// Read existing messages from file\nfunction readMessages() {\n    try {\n        ensurePublicDirectory();\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(MESSAGES_FILE)) {\n            return [];\n        }\n        const fileContent = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(MESSAGES_FILE, \"utf-8\");\n        const data = JSON.parse(fileContent);\n        return Array.isArray(data.messages) ? data.messages : [];\n    } catch (error) {\n        console.error(\"Error reading messages file:\", error);\n        return [];\n    }\n}\n// Write messages to file\nfunction writeMessages(messages) {\n    try {\n        ensurePublicDirectory();\n        const data = {\n            lastUpdated: new Date().toISOString(),\n            totalMessages: messages.length,\n            messages: messages\n        };\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(MESSAGES_FILE, JSON.stringify(data, null, 2));\n        console.log(`✅ Saved ${messages.length} messages to discord-messages.json`);\n    } catch (error) {\n        console.error(\"Error writing messages file:\", error);\n        throw error;\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        if (!body.channelId || !Array.isArray(body.messages)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid payload format\"\n            }, {\n                status: 400\n            });\n        }\n        // Read existing messages\n        const existingMessages = readMessages();\n        const existingIds = new Set(existingMessages.map((msg)=>msg.id));\n        // Simple deduplication based only on message ID and timestamp\n        const newMessages = body.messages.filter((msg)=>{\n            // Only check if we've seen this exact message ID before\n            if (existingIds.has(msg.id)) {\n                return false;\n            }\n            // Also check for same timestamp to catch rapid duplicates\n            const msgTimestamp = new Date(msg.timestamp).getTime();\n            const duplicateByTime = existingMessages.some((existing)=>Math.abs(new Date(existing.timestamp).getTime() - msgTimestamp) < 1000 // Within 1 second\n                 && existing.author === msg.author);\n            return !duplicateByTime;\n        });\n        if (newMessages.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"No new messages to process\",\n                total: existingMessages.length\n            });\n        }\n        // Merge with existing messages\n        const allMessages = [\n            ...existingMessages,\n            ...newMessages\n        ];\n        // Keep only the most recent 1000 messages to prevent file from growing too large\n        const recentMessages = allMessages.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, 1000);\n        // Write to file\n        writeMessages(recentMessages);\n        console.log(`📝 Processed ${newMessages.length} new messages from channel ${body.channelId}`);\n        // Create a simple notification mechanism using a timestamp file\n        // This will allow the frontend to detect when new data is available\n        const notificationFile = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"last-update.json\");\n        try {\n            const updateInfo = {\n                lastUpdate: new Date().toISOString(),\n                newMessages: newMessages.length,\n                totalMessages: recentMessages.length,\n                timestamp: Date.now() // Add timestamp for easier comparison\n            };\n            fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(notificationFile, JSON.stringify(updateInfo));\n            console.log(\"\\uD83D\\uDCE1 Created update notification for frontend\");\n            // NOTIFY SSE CLIENTS IMMEDIATELY\n            try {\n                _sse_manager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().notifyAll({\n                    type: \"new-messages\",\n                    count: newMessages.length,\n                    total: recentMessages.length,\n                    timestamp: new Date().toISOString()\n                });\n                console.log(`🚀 Notified SSE clients of ${newMessages.length} new messages`);\n            } catch (sseError) {\n                console.error(\"Failed to notify SSE clients:\", sseError);\n            }\n        } catch (error) {\n            console.warn(\"Could not write notification file:\", error);\n        }\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: `Processed ${newMessages.length} new messages`,\n            newMessages: newMessages.length,\n            total: recentMessages.length,\n            lastUpdate: new Date().toISOString()\n        }));\n    } catch (error) {\n        console.error(\"Error processing webhook:\", error);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        }));\n    }\n}\nfunction OPTIONS(request) {\n    return withCors(new Response(null, {\n        status: 200\n    }));\n}\n// Discord message parser - converts raw messages to activity data\nfunction parseDiscordMessage(message) {\n    try {\n        const content = message.content.trim();\n        // Parse Spidey Bot messages for farm activities\n        // Try CAIXA messages first (deposits/withdrawals) - they don't have \"Autor:\" field\n        const caixaMatch = content.match(/REGISTRO - fazenda_86\\s*CAIXA ORGANIZAÇÃO\\s*-\\s*(DEPÓSITO|SAQUE)(.+?)Autor:(.+?)\\s*\\|\\s*FIXO:\\s*(\\d+)/s);\n        if (caixaMatch) {\n            const transactionType = caixaMatch[1].trim();\n            const actionPart = caixaMatch[2].trim();\n            const autor = caixaMatch[3].trim();\n            if (transactionType === \"DEP\\xd3SITO\") {\n                // Parse DEPÓSITO (deposit money) - with \"Ação:\" (for sales/actions)\n                const depositWithActionMatch = actionPart.match(/Valor depositado:\\s*\\$([0-9,.]+)\\s*Ação:(.+?)Saldo após depósito:\\s*\\$([0-9,.]+)/);\n                if (depositWithActionMatch) {\n                    const valor = parseFloat(depositWithActionMatch[1].replace(\",\", \"\"));\n                    const acao = depositWithActionMatch[2].trim();\n                    const saldo = parseFloat(depositWithActionMatch[3].replace(\",\", \"\"));\n                    return {\n                        ...message,\n                        parseSuccess: true,\n                        tipo: \"venda\",\n                        categoria: \"financeiro\",\n                        valor: valor,\n                        autor: autor,\n                        descricao: acao,\n                        displayText: `${autor} ${acao} por $${valor.toFixed(2)}`,\n                        confidence: \"high\"\n                    };\n                }\n            } else if (transactionType === \"SAQUE\") {\n                // Parse SAQUE (withdraw money)\n                const withdrawMatch = actionPart.match(/Valor sacado:\\s*\\$([0-9,.]+).*?Saldo após saque:\\s*\\$([0-9,.]+)/s);\n                if (withdrawMatch) {\n                    const valor = parseFloat(withdrawMatch[1].replace(\",\", \"\"));\n                    const saldo = parseFloat(withdrawMatch[3].replace(\",\", \"\"));\n                    return {\n                        ...message,\n                        parseSuccess: true,\n                        tipo: \"saque\",\n                        categoria: \"financeiro\",\n                        valor: valor,\n                        autor: autor,\n                        descricao: `Saque de $${valor.toFixed(2)}`,\n                        displayText: `${autor} sacou $${valor.toFixed(2)} do caixa`,\n                        confidence: \"high\"\n                    };\n                }\n            }\n        }\n        // Then try BAÚ messages (inventory) - they have \"Autor:\" field\n        const spideyBotMatch = content.match(/REGISTRO - fazenda_86(.+?)Autor:(.+?)\\s*\\|\\s*FIXO:\\s*(\\d+)/s);\n        if (spideyBotMatch) {\n            const actionPart = spideyBotMatch[1].trim();\n            const autor = spideyBotMatch[2].trim();\n            // Parse INSERIR ITEM (add item)\n            const addMatch = actionPart.match(/INSERIR ITEM\\s*Item adicionado:\\s*(.+?)\\s*x(\\d+)/);\n            if (addMatch) {\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"adicionar\",\n                    categoria: \"inventario\",\n                    item: addMatch[1].trim(),\n                    quantidade: parseInt(addMatch[2]),\n                    autor: autor,\n                    displayText: `${autor} adicionou ${addMatch[2]}x ${addMatch[1]}`\n                };\n            }\n            // Parse REMOVER ITEM (remove item)  \n            const removeMatch = actionPart.match(/REMOVER ITEM\\s*Item removido:\\s*(.+?)\\s*x(\\d+)/);\n            if (removeMatch) {\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"remover\",\n                    categoria: \"inventario\",\n                    item: removeMatch[1].trim(),\n                    quantidade: parseInt(removeMatch[2]),\n                    autor: autor,\n                    displayText: `${autor} removeu ${removeMatch[2]}x ${removeMatch[1]}`\n                };\n            }\n        }\n        // Try to parse other message formats (fallback patterns)\n        const itemAddPattern = /(?:Item adicionado|adicionou):\\s*(.+?)\\s*x(\\d+)/i;\n        const itemRemovePattern = /(?:Item removido|removeu):\\s*(.+?)\\s*x(\\d+)/i;\n        const moneyPattern = /\\$([0-9,.]+)/;\n        const addMatch = content.match(itemAddPattern);\n        if (addMatch) {\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: \"adicionar\",\n                categoria: \"inventario\",\n                item: addMatch[1].trim(),\n                quantidade: parseInt(addMatch[2]),\n                autor: message.author || \"Sistema\",\n                displayText: `${message.author} adicionou ${addMatch[2]}x ${addMatch[1]}`\n            };\n        }\n        const removeMatch = content.match(itemRemovePattern);\n        if (removeMatch) {\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: \"remover\",\n                categoria: \"inventario\",\n                item: removeMatch[1].trim(),\n                quantidade: parseInt(removeMatch[2]),\n                autor: message.author || \"Sistema\",\n                displayText: `${message.author} removeu ${removeMatch[2]}x ${removeMatch[1]}`\n            };\n        }\n        // Parse SAQUE (withdrawal) messages - format: Zero Bala sacou $2000 do caixa\n        if (content.includes(\"SAQUE\") && content.includes(\"Valor sacado:\")) {\n            const valorMatch = content.match(/Valor sacado:\\s*\\$([0-9,.]+)/);\n            const autorMatch = content.match(/Autor:(.+?)\\s*\\|/);\n            if (valorMatch && autorMatch) {\n                const valor = parseFloat(valorMatch[1].replace(\",\", \"\"));\n                const autorSaque = autorMatch[1].trim();\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"saque\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: autorSaque,\n                    descricao: `Saque de $${valor.toFixed(2)}`,\n                    displayText: `sacou do caixa`\n                };\n            }\n        }\n        // Parse DEPÓSITO (deposit) messages - format: jack sparrow vendeu 4 animais no matadouro por $160\n        if (content.includes(\"DEP\\xd3SITO\") && content.includes(\"Valor depositado:\")) {\n            const valorMatch = content.match(/Valor depositado:\\s*\\$([0-9,.]+)/);\n            const acaoMatch = content.match(/Ação:(.+?)Saldo após depósito:/);\n            if (valorMatch && acaoMatch) {\n                const valor = parseFloat(valorMatch[1].replace(\",\", \"\"));\n                const acao = acaoMatch[1].trim();\n                // Extract author from action \"jack sparrow vendeu 4 animais no matadouro\"\n                const vendeuMatch = acao.match(/^(.+?)\\s+vendeu\\s+(\\d+)\\s+animais\\s+no\\s+matadouro/);\n                if (vendeuMatch) {\n                    const autorDeposito = vendeuMatch[1].trim();\n                    const quantidade = vendeuMatch[2];\n                    return {\n                        ...message,\n                        parseSuccess: true,\n                        tipo: \"deposito\",\n                        categoria: \"financeiro\",\n                        valor: valor,\n                        autor: autorDeposito,\n                        descricao: `Vendeu ${quantidade} animais no matadouro`,\n                        displayText: `vendeu ${quantidade} animais no matadouro por`\n                    };\n                }\n                // Fallback for other deposit actions\n                return {\n                    ...message,\n                    parseSuccess: true,\n                    tipo: \"deposito\",\n                    categoria: \"financeiro\",\n                    valor: valor,\n                    autor: \"Sistema\",\n                    descricao: acao,\n                    displayText: `Sistema depositou $${valor.toFixed(2)} no caixa`\n                };\n            }\n        }\n        const moneyMatch = content.match(moneyPattern);\n        if (moneyMatch && (content.toLowerCase().includes(\"deposit\") || content.toLowerCase().includes(\"saque\") || content.toLowerCase().includes(\"vendeu\"))) {\n            const valor = parseFloat(moneyMatch[1].replace(\",\", \"\"));\n            return {\n                ...message,\n                parseSuccess: true,\n                tipo: content.toLowerCase().includes(\"saque\") ? \"saque\" : \"deposito\",\n                categoria: \"financeiro\",\n                valor: valor,\n                autor: message.author || \"Sistema\",\n                displayText: content.substring(0, 100)\n            };\n        }\n        // Return unparsed message\n        return {\n            ...message,\n            parseSuccess: false,\n            categoria: \"sistema\",\n            displayText: content.substring(0, 100)\n        };\n    } catch (error) {\n        console.error(\"Parse error:\", error);\n        return {\n            ...message,\n            parseSuccess: false,\n            categoria: \"sistema\",\n            displayText: message.content.substring(0, 100)\n        };\n    }\n}\nasync function GET(request) {\n    try {\n        const messages = readMessages();\n        // Parse all messages and return parsed activities\n        const parsedMessages = messages.map(parseDiscordMessage);\n        console.log(`📊 Parsed ${parsedMessages.length} messages, ${parsedMessages.filter((m)=>m.parseSuccess).length} successfully parsed`);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            messages: parsedMessages,\n            total: parsedMessages.length,\n            lastUpdated: messages.length > 0 ? messages[0]?.timestamp : null,\n            parsed: parsedMessages.filter((m)=>m.parseSuccess).length\n        }));\n    } catch (error) {\n        console.error(\"Error reading messages:\", error);\n        return withCors(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to read messages\"\n        }, {\n            status: 500\n        }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3dlYmhvb2svY2hhbm5lbC1tZXNzYWdlcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ3JDO0FBQ0k7QUFDZ0I7QUFFeEMsK0NBQStDO0FBQ3hDLE1BQU1JLFVBQVUsZ0JBQWdCO0FBaUJ2QyxlQUFlO0FBQ2YsTUFBTUMsY0FBYztJQUNsQiwrQkFBK0I7SUFDL0IsZ0NBQWdDO0lBQ2hDLGdDQUFnQztJQUNoQywwQkFBMEI7QUFDNUI7QUFFQSxTQUFTQyxTQUFTQyxRQUFrQjtJQUNsQ0MsT0FBT0MsT0FBTyxDQUFDSixhQUFhSyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQy9DTCxTQUFTTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsS0FBS0M7SUFDNUI7SUFDQSxPQUFPTDtBQUNUO0FBRUEsd0RBQXdEO0FBQ3hELE1BQU1RLGdCQUFnQmIsZ0RBQVMsQ0FBQ2UsUUFBUUMsR0FBRyxJQUFJLFVBQVU7QUFFekQscUNBQXFDO0FBQ3JDLFNBQVNDO0lBQ1AsTUFBTUMsWUFBWWxCLGdEQUFTLENBQUNlLFFBQVFDLEdBQUcsSUFBSTtJQUMzQyxJQUFJLENBQUNqQixvREFBYSxDQUFDbUIsWUFBWTtRQUM3Qm5CLG1EQUFZLENBQUNtQixXQUFXO1lBQUVHLFdBQVc7UUFBSztJQUM1QztBQUNGO0FBRUEsbUNBQW1DO0FBQ25DLFNBQVNDO0lBQ1AsSUFBSTtRQUNGTDtRQUVBLElBQUksQ0FBQ2xCLG9EQUFhLENBQUNjLGdCQUFnQjtZQUNqQyxPQUFPLEVBQUU7UUFDWDtRQUVBLE1BQU1VLGNBQWN4QixzREFBZSxDQUFDYyxlQUFlO1FBQ25ELE1BQU1ZLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0o7UUFDeEIsT0FBT0ssTUFBTUMsT0FBTyxDQUFDSixLQUFLSyxRQUFRLElBQUlMLEtBQUtLLFFBQVEsR0FBRyxFQUFFO0lBQzFELEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQWdD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O1lBQUVFLFNBQVM7WUFBT2hCLE9BQU87UUFBMEIsR0FDbkQ7WUFBRWlCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVkbS1kYXNoYm9hcmQvLi9hcHAvYXBpL3dlYmhvb2svY2hhbm5lbC1tZXNzYWdlcy9yb3V0ZS50cz8zYjg1Il0sInNvdXJjZXNDb250ZW50IjpbIiBpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IFNTRU1hbmFnZXIgZnJvbSAnLi4vc3NlLW1hbmFnZXInO1xyXG5cclxuLy8gRGlzYWJsZSBzdGF0aWMgZ2VuZXJhdGlvbiBmb3IgdGhpcyBBUEkgcm91dGVcclxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XHJcblxyXG5pbnRlcmZhY2UgTWVzc2FnZURhdGEge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbiAgZGlzY29yZFRpbWVzdGFtcD86IHN0cmluZztcclxuICBhdXRob3I6IHN0cmluZztcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgY2hhbm5lbElkOiBzdHJpbmc7XHJcbiAgc291cmNlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBXZWJob29rUGF5bG9hZCB7XHJcbiAgY2hhbm5lbElkOiBzdHJpbmc7XHJcbiAgbWVzc2FnZXM6IE1lc3NhZ2VEYXRhW107XHJcbn1cclxuXHJcbi8vIENPUlMgaGVhZGVyc1xyXG5jb25zdCBjb3JzSGVhZGVycyA9IHtcclxuICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgUE9TVCwgT1BUSU9OUycsXHJcbiAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlLCBPcmlnaW4sIEFjY2VwdCcsXHJcbiAgJ0FjY2Vzcy1Db250cm9sLU1heC1BZ2UnOiAnODY0MDAnLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gd2l0aENvcnMocmVzcG9uc2U6IFJlc3BvbnNlKSB7XHJcbiAgT2JqZWN0LmVudHJpZXMoY29yc0hlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcblxyXG4vLyBTdG9yZSBtZXNzYWdlcyBpbiBhIEpTT04gZmlsZSBpbiB0aGUgcHVibGljIGRpcmVjdG9yeVxyXG5jb25zdCBNRVNTQUdFU19GSUxFID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnZGlzY29yZC1tZXNzYWdlcy5qc29uJyk7XHJcblxyXG4vLyBFbnN1cmUgdGhlIHB1YmxpYyBkaXJlY3RvcnkgZXhpc3RzXHJcbmZ1bmN0aW9uIGVuc3VyZVB1YmxpY0RpcmVjdG9yeSgpIHtcclxuICBjb25zdCBwdWJsaWNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycpO1xyXG4gIGlmICghZnMuZXhpc3RzU3luYyhwdWJsaWNEaXIpKSB7XHJcbiAgICBmcy5ta2RpclN5bmMocHVibGljRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFJlYWQgZXhpc3RpbmcgbWVzc2FnZXMgZnJvbSBmaWxlXHJcbmZ1bmN0aW9uIHJlYWRNZXNzYWdlcygpOiBNZXNzYWdlRGF0YVtdIHtcclxuICB0cnkge1xyXG4gICAgZW5zdXJlUHVibGljRGlyZWN0b3J5KCk7XHJcbiAgICBcclxuICAgIGlmICghZnMuZXhpc3RzU3luYyhNRVNTQUdFU19GSUxFKSkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKE1FU1NBR0VTX0ZJTEUsICd1dGYtOCcpO1xyXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZGF0YS5tZXNzYWdlcykgPyBkYXRhLm1lc3NhZ2VzIDogW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgbWVzc2FnZXMgZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG4vLyBXcml0ZSBtZXNzYWdlcyB0byBmaWxlXHJcbmZ1bmN0aW9uIHdyaXRlTWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VEYXRhW10pIHtcclxuICB0cnkge1xyXG4gICAgZW5zdXJlUHVibGljRGlyZWN0b3J5KCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHRvdGFsTWVzc2FnZXM6IG1lc3NhZ2VzLmxlbmd0aCxcclxuICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmcy53cml0ZUZpbGVTeW5jKE1FU1NBR0VTX0ZJTEUsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcclxuICAgIGNvbnNvbGUubG9nKGDinIUgU2F2ZWQgJHttZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzIHRvIGRpc2NvcmQtbWVzc2FnZXMuanNvbmApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3cml0aW5nIG1lc3NhZ2VzIGZpbGU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5OiBXZWJob29rUGF5bG9hZCA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgXHJcbiAgICBpZiAoIWJvZHkuY2hhbm5lbElkIHx8ICFBcnJheS5pc0FycmF5KGJvZHkubWVzc2FnZXMpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgcGF5bG9hZCBmb3JtYXQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVhZCBleGlzdGluZyBtZXNzYWdlc1xyXG4gICAgY29uc3QgZXhpc3RpbmdNZXNzYWdlcyA9IHJlYWRNZXNzYWdlcygpO1xyXG4gICAgY29uc3QgZXhpc3RpbmdJZHMgPSBuZXcgU2V0KGV4aXN0aW5nTWVzc2FnZXMubWFwKG1zZyA9PiBtc2cuaWQpKTtcclxuXHJcbiAgICAvLyBTaW1wbGUgZGVkdXBsaWNhdGlvbiBiYXNlZCBvbmx5IG9uIG1lc3NhZ2UgSUQgYW5kIHRpbWVzdGFtcFxyXG4gICAgY29uc3QgbmV3TWVzc2FnZXMgPSBib2R5Lm1lc3NhZ2VzLmZpbHRlcihtc2cgPT4ge1xyXG4gICAgICAvLyBPbmx5IGNoZWNrIGlmIHdlJ3ZlIHNlZW4gdGhpcyBleGFjdCBtZXNzYWdlIElEIGJlZm9yZVxyXG4gICAgICBpZiAoZXhpc3RpbmdJZHMuaGFzKG1zZy5pZCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEFsc28gY2hlY2sgZm9yIHNhbWUgdGltZXN0YW1wIHRvIGNhdGNoIHJhcGlkIGR1cGxpY2F0ZXNcclxuICAgICAgY29uc3QgbXNnVGltZXN0YW1wID0gbmV3IERhdGUobXNnLnRpbWVzdGFtcCkuZ2V0VGltZSgpO1xyXG4gICAgICBjb25zdCBkdXBsaWNhdGVCeVRpbWUgPSBleGlzdGluZ01lc3NhZ2VzLnNvbWUoZXhpc3RpbmcgPT4gXHJcbiAgICAgICAgTWF0aC5hYnMobmV3IERhdGUoZXhpc3RpbmcudGltZXN0YW1wKS5nZXRUaW1lKCkgLSBtc2dUaW1lc3RhbXApIDwgMTAwMCAvLyBXaXRoaW4gMSBzZWNvbmRcclxuICAgICAgICAmJiBleGlzdGluZy5hdXRob3IgPT09IG1zZy5hdXRob3JcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiAhZHVwbGljYXRlQnlUaW1lO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGlmIChuZXdNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdObyBuZXcgbWVzc2FnZXMgdG8gcHJvY2VzcycsXHJcbiAgICAgICAgdG90YWw6IGV4aXN0aW5nTWVzc2FnZXMubGVuZ3RoXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgbWVzc2FnZXNcclxuICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gWy4uLmV4aXN0aW5nTWVzc2FnZXMsIC4uLm5ld01lc3NhZ2VzXTtcclxuICAgIFxyXG4gICAgLy8gS2VlcCBvbmx5IHRoZSBtb3N0IHJlY2VudCAxMDAwIG1lc3NhZ2VzIHRvIHByZXZlbnQgZmlsZSBmcm9tIGdyb3dpbmcgdG9vIGxhcmdlXHJcbiAgICBjb25zdCByZWNlbnRNZXNzYWdlcyA9IGFsbE1lc3NhZ2VzXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSlcclxuICAgICAgLnNsaWNlKDAsIDEwMDApO1xyXG5cclxuICAgIC8vIFdyaXRlIHRvIGZpbGVcclxuICAgIHdyaXRlTWVzc2FnZXMocmVjZW50TWVzc2FnZXMpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OdIFByb2Nlc3NlZCAke25ld01lc3NhZ2VzLmxlbmd0aH0gbmV3IG1lc3NhZ2VzIGZyb20gY2hhbm5lbCAke2JvZHkuY2hhbm5lbElkfWApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBub3RpZmljYXRpb24gbWVjaGFuaXNtIHVzaW5nIGEgdGltZXN0YW1wIGZpbGVcclxuICAgIC8vIFRoaXMgd2lsbCBhbGxvdyB0aGUgZnJvbnRlbmQgdG8gZGV0ZWN0IHdoZW4gbmV3IGRhdGEgaXMgYXZhaWxhYmxlXHJcbiAgICBjb25zdCBub3RpZmljYXRpb25GaWxlID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnbGFzdC11cGRhdGUuanNvbicpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlSW5mbyA9IHtcclxuICAgICAgICBsYXN0VXBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgbmV3TWVzc2FnZXM6IG5ld01lc3NhZ2VzLmxlbmd0aCxcclxuICAgICAgICB0b3RhbE1lc3NhZ2VzOiByZWNlbnRNZXNzYWdlcy5sZW5ndGgsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC8vIEFkZCB0aW1lc3RhbXAgZm9yIGVhc2llciBjb21wYXJpc29uXHJcbiAgICAgIH07XHJcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMobm90aWZpY2F0aW9uRmlsZSwgSlNPTi5zdHJpbmdpZnkodXBkYXRlSW5mbykpO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+ToSBDcmVhdGVkIHVwZGF0ZSBub3RpZmljYXRpb24gZm9yIGZyb250ZW5kJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBOT1RJRlkgU1NFIENMSUVOVFMgSU1NRURJQVRFTFlcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBTU0VNYW5hZ2VyLmdldEluc3RhbmNlKCkubm90aWZ5QWxsKHtcclxuICAgICAgICAgIHR5cGU6ICduZXctbWVzc2FnZXMnLFxyXG4gICAgICAgICAgY291bnQ6IG5ld01lc3NhZ2VzLmxlbmd0aCxcclxuICAgICAgICAgIHRvdGFsOiByZWNlbnRNZXNzYWdlcy5sZW5ndGgsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5qAIE5vdGlmaWVkIFNTRSBjbGllbnRzIG9mICR7bmV3TWVzc2FnZXMubGVuZ3RofSBuZXcgbWVzc2FnZXNgKTtcclxuICAgICAgfSBjYXRjaCAoc3NlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbm90aWZ5IFNTRSBjbGllbnRzOicsIHNzZUVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3Qgd3JpdGUgbm90aWZpY2F0aW9uIGZpbGU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IGBQcm9jZXNzZWQgJHtuZXdNZXNzYWdlcy5sZW5ndGh9IG5ldyBtZXNzYWdlc2AsXHJcbiAgICAgIG5ld01lc3NhZ2VzOiBuZXdNZXNzYWdlcy5sZW5ndGgsXHJcbiAgICAgIHRvdGFsOiByZWNlbnRNZXNzYWdlcy5sZW5ndGgsXHJcbiAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSkpO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyB3ZWJob29rOicsIGVycm9yKTtcclxuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gT1BUSU9OUyhyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHJldHVybiB3aXRoQ29ycyhuZXcgUmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDIwMCB9KSk7XHJcbn1cclxuXHJcbi8vIERpc2NvcmQgbWVzc2FnZSBwYXJzZXIgLSBjb252ZXJ0cyByYXcgbWVzc2FnZXMgdG8gYWN0aXZpdHkgZGF0YVxyXG5mdW5jdGlvbiBwYXJzZURpc2NvcmRNZXNzYWdlKG1lc3NhZ2U6IE1lc3NhZ2VEYXRhKTogYW55IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2UuY29udGVudC50cmltKCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gUGFyc2UgU3BpZGV5IEJvdCBtZXNzYWdlcyBmb3IgZmFybSBhY3Rpdml0aWVzXHJcbiAgICAvLyBUcnkgQ0FJWEEgbWVzc2FnZXMgZmlyc3QgKGRlcG9zaXRzL3dpdGhkcmF3YWxzKSAtIHRoZXkgZG9uJ3QgaGF2ZSBcIkF1dG9yOlwiIGZpZWxkXHJcbiAgICBjb25zdCBjYWl4YU1hdGNoID0gY29udGVudC5tYXRjaCgvUkVHSVNUUk8gLSBmYXplbmRhXzg2XFxzKkNBSVhBIE9SR0FOSVpBw4fDg09cXHMqLVxccyooREVQw5NTSVRPfFNBUVVFKSguKz8pQXV0b3I6KC4rPylcXHMqXFx8XFxzKkZJWE86XFxzKihcXGQrKS9zKTtcclxuICAgIGlmIChjYWl4YU1hdGNoKSB7XHJcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uVHlwZSA9IGNhaXhhTWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICBjb25zdCBhY3Rpb25QYXJ0ID0gY2FpeGFNYXRjaFsyXS50cmltKCk7XHJcbiAgICAgIGNvbnN0IGF1dG9yID0gY2FpeGFNYXRjaFszXS50cmltKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodHJhbnNhY3Rpb25UeXBlID09PSAnREVQw5NTSVRPJykge1xyXG4gICAgICAgIC8vIFBhcnNlIERFUMOTU0lUTyAoZGVwb3NpdCBtb25leSkgLSB3aXRoIFwiQcOnw6NvOlwiIChmb3Igc2FsZXMvYWN0aW9ucylcclxuICAgICAgICBjb25zdCBkZXBvc2l0V2l0aEFjdGlvbk1hdGNoID0gYWN0aW9uUGFydC5tYXRjaCgvVmFsb3IgZGVwb3NpdGFkbzpcXHMqXFwkKFswLTksLl0rKVxccypBw6fDo286KC4rPylTYWxkbyBhcMOzcyBkZXDDs3NpdG86XFxzKlxcJChbMC05LC5dKykvKTtcclxuICAgICAgICBpZiAoZGVwb3NpdFdpdGhBY3Rpb25NYXRjaCkge1xyXG4gICAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KGRlcG9zaXRXaXRoQWN0aW9uTWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XHJcbiAgICAgICAgICBjb25zdCBhY2FvID0gZGVwb3NpdFdpdGhBY3Rpb25NYXRjaFsyXS50cmltKCk7XHJcbiAgICAgICAgICBjb25zdCBzYWxkbyA9IHBhcnNlRmxvYXQoZGVwb3NpdFdpdGhBY3Rpb25NYXRjaFszXS5yZXBsYWNlKCcsJywgJycpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICB0aXBvOiAndmVuZGEnLFxyXG4gICAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcclxuICAgICAgICAgICAgdmFsb3I6IHZhbG9yLFxyXG4gICAgICAgICAgICBhdXRvcjogYXV0b3IsXHJcbiAgICAgICAgICAgIGRlc2NyaWNhbzogYWNhbyxcclxuICAgICAgICAgICAgZGlzcGxheVRleHQ6IGAke2F1dG9yfSAke2FjYW99IHBvciAkJHt2YWxvci50b0ZpeGVkKDIpfWAsXHJcbiAgICAgICAgICAgIGNvbmZpZGVuY2U6ICdoaWdoJ1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAodHJhbnNhY3Rpb25UeXBlID09PSAnU0FRVUUnKSB7XHJcbiAgICAgICAgLy8gUGFyc2UgU0FRVUUgKHdpdGhkcmF3IG1vbmV5KVxyXG4gICAgICAgIGNvbnN0IHdpdGhkcmF3TWF0Y2ggPSBhY3Rpb25QYXJ0Lm1hdGNoKC9WYWxvciBzYWNhZG86XFxzKlxcJChbMC05LC5dKykuKj9TYWxkbyBhcMOzcyBzYXF1ZTpcXHMqXFwkKFswLTksLl0rKS9zKTtcclxuICAgICAgICBpZiAod2l0aGRyYXdNYXRjaCkge1xyXG4gICAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHdpdGhkcmF3TWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XHJcbiAgICAgICAgICBjb25zdCBzYWxkbyA9IHBhcnNlRmxvYXQod2l0aGRyYXdNYXRjaFszXS5yZXBsYWNlKCcsJywgJycpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICB0aXBvOiAnc2FxdWUnLFxyXG4gICAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcclxuICAgICAgICAgICAgdmFsb3I6IHZhbG9yLFxyXG4gICAgICAgICAgICBhdXRvcjogYXV0b3IsXHJcbiAgICAgICAgICAgIGRlc2NyaWNhbzogYFNhcXVlIGRlICQke3ZhbG9yLnRvRml4ZWQoMil9YCxcclxuICAgICAgICAgICAgZGlzcGxheVRleHQ6IGAke2F1dG9yfSBzYWNvdSAkJHt2YWxvci50b0ZpeGVkKDIpfSBkbyBjYWl4YWAsXHJcbiAgICAgICAgICAgIGNvbmZpZGVuY2U6ICdoaWdoJ1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVGhlbiB0cnkgQkHDmiBtZXNzYWdlcyAoaW52ZW50b3J5KSAtIHRoZXkgaGF2ZSBcIkF1dG9yOlwiIGZpZWxkXHJcbiAgICBjb25zdCBzcGlkZXlCb3RNYXRjaCA9IGNvbnRlbnQubWF0Y2goL1JFR0lTVFJPIC0gZmF6ZW5kYV84NiguKz8pQXV0b3I6KC4rPylcXHMqXFx8XFxzKkZJWE86XFxzKihcXGQrKS9zKTtcclxuICAgIGlmIChzcGlkZXlCb3RNYXRjaCkge1xyXG4gICAgICBjb25zdCBhY3Rpb25QYXJ0ID0gc3BpZGV5Qm90TWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICBjb25zdCBhdXRvciA9IHNwaWRleUJvdE1hdGNoWzJdLnRyaW0oKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFBhcnNlIElOU0VSSVIgSVRFTSAoYWRkIGl0ZW0pXHJcbiAgICAgIGNvbnN0IGFkZE1hdGNoID0gYWN0aW9uUGFydC5tYXRjaCgvSU5TRVJJUiBJVEVNXFxzKkl0ZW0gYWRpY2lvbmFkbzpcXHMqKC4rPylcXHMqeChcXGQrKS8pO1xyXG4gICAgICBpZiAoYWRkTWF0Y2gpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICAgIHBhcnNlU3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIHRpcG86ICdhZGljaW9uYXInLFxyXG4gICAgICAgICAgY2F0ZWdvcmlhOiAnaW52ZW50YXJpbycsXHJcbiAgICAgICAgICBpdGVtOiBhZGRNYXRjaFsxXS50cmltKCksXHJcbiAgICAgICAgICBxdWFudGlkYWRlOiBwYXJzZUludChhZGRNYXRjaFsyXSksXHJcbiAgICAgICAgICBhdXRvcjogYXV0b3IsXHJcbiAgICAgICAgICBkaXNwbGF5VGV4dDogYCR7YXV0b3J9IGFkaWNpb25vdSAke2FkZE1hdGNoWzJdfXggJHthZGRNYXRjaFsxXX1gXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gUGFyc2UgUkVNT1ZFUiBJVEVNIChyZW1vdmUgaXRlbSkgIFxyXG4gICAgICBjb25zdCByZW1vdmVNYXRjaCA9IGFjdGlvblBhcnQubWF0Y2goL1JFTU9WRVIgSVRFTVxccypJdGVtIHJlbW92aWRvOlxccyooLis/KVxccyp4KFxcZCspLyk7XHJcbiAgICAgIGlmIChyZW1vdmVNYXRjaCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAuLi5tZXNzYWdlLFxyXG4gICAgICAgICAgcGFyc2VTdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgdGlwbzogJ3JlbW92ZXInLFxyXG4gICAgICAgICAgY2F0ZWdvcmlhOiAnaW52ZW50YXJpbycsXHJcbiAgICAgICAgICBpdGVtOiByZW1vdmVNYXRjaFsxXS50cmltKCksXHJcbiAgICAgICAgICBxdWFudGlkYWRlOiBwYXJzZUludChyZW1vdmVNYXRjaFsyXSksXHJcbiAgICAgICAgICBhdXRvcjogYXV0b3IsXHJcbiAgICAgICAgICBkaXNwbGF5VGV4dDogYCR7YXV0b3J9IHJlbW92ZXUgJHtyZW1vdmVNYXRjaFsyXX14ICR7cmVtb3ZlTWF0Y2hbMV19YFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJ5IHRvIHBhcnNlIG90aGVyIG1lc3NhZ2UgZm9ybWF0cyAoZmFsbGJhY2sgcGF0dGVybnMpXHJcbiAgICBjb25zdCBpdGVtQWRkUGF0dGVybiA9IC8oPzpJdGVtIGFkaWNpb25hZG98YWRpY2lvbm91KTpcXHMqKC4rPylcXHMqeChcXGQrKS9pO1xyXG4gICAgY29uc3QgaXRlbVJlbW92ZVBhdHRlcm4gPSAvKD86SXRlbSByZW1vdmlkb3xyZW1vdmV1KTpcXHMqKC4rPylcXHMqeChcXGQrKS9pO1xyXG4gICAgY29uc3QgbW9uZXlQYXR0ZXJuID0gL1xcJChbMC05LC5dKykvO1xyXG4gICAgXHJcbiAgICBjb25zdCBhZGRNYXRjaCA9IGNvbnRlbnQubWF0Y2goaXRlbUFkZFBhdHRlcm4pO1xyXG4gICAgaWYgKGFkZE1hdGNoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdGlwbzogJ2FkaWNpb25hcicsXHJcbiAgICAgICAgY2F0ZWdvcmlhOiAnaW52ZW50YXJpbycsXHJcbiAgICAgICAgaXRlbTogYWRkTWF0Y2hbMV0udHJpbSgpLFxyXG4gICAgICAgIHF1YW50aWRhZGU6IHBhcnNlSW50KGFkZE1hdGNoWzJdKSxcclxuICAgICAgICBhdXRvcjogbWVzc2FnZS5hdXRob3IgfHwgJ1Npc3RlbWEnLFxyXG4gICAgICAgIGRpc3BsYXlUZXh0OiBgJHttZXNzYWdlLmF1dGhvcn0gYWRpY2lvbm91ICR7YWRkTWF0Y2hbMl19eCAke2FkZE1hdGNoWzFdfWAsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlbW92ZU1hdGNoID0gY29udGVudC5tYXRjaChpdGVtUmVtb3ZlUGF0dGVybik7XHJcbiAgICBpZiAocmVtb3ZlTWF0Y2gpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5tZXNzYWdlLFxyXG4gICAgICAgIHBhcnNlU3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB0aXBvOiAncmVtb3ZlcicsXHJcbiAgICAgICAgY2F0ZWdvcmlhOiAnaW52ZW50YXJpbycsXHJcbiAgICAgICAgaXRlbTogcmVtb3ZlTWF0Y2hbMV0udHJpbSgpLFxyXG4gICAgICAgIHF1YW50aWRhZGU6IHBhcnNlSW50KHJlbW92ZU1hdGNoWzJdKSxcclxuICAgICAgICBhdXRvcjogbWVzc2FnZS5hdXRob3IgfHwgJ1Npc3RlbWEnLFxyXG4gICAgICAgIGRpc3BsYXlUZXh0OiBgJHttZXNzYWdlLmF1dGhvcn0gcmVtb3ZldSAke3JlbW92ZU1hdGNoWzJdfXggJHtyZW1vdmVNYXRjaFsxXX1gLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQYXJzZSBTQVFVRSAod2l0aGRyYXdhbCkgbWVzc2FnZXMgLSBmb3JtYXQ6IFplcm8gQmFsYSBzYWNvdSAkMjAwMCBkbyBjYWl4YVxyXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ1NBUVVFJykgJiYgY29udGVudC5pbmNsdWRlcygnVmFsb3Igc2FjYWRvOicpKSB7XHJcbiAgICAgIGNvbnN0IHZhbG9yTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9WYWxvciBzYWNhZG86XFxzKlxcJChbMC05LC5dKykvKTtcclxuICAgICAgY29uc3QgYXV0b3JNYXRjaCA9IGNvbnRlbnQubWF0Y2goL0F1dG9yOiguKz8pXFxzKlxcfC8pO1xyXG4gICAgICBcclxuICAgICAgaWYgKHZhbG9yTWF0Y2ggJiYgYXV0b3JNYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHZhbG9yID0gcGFyc2VGbG9hdCh2YWxvck1hdGNoWzFdLnJlcGxhY2UoJywnLCAnJykpO1xyXG4gICAgICAgIGNvbnN0IGF1dG9yU2FxdWUgPSBhdXRvck1hdGNoWzFdLnRyaW0oKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICAgIHBhcnNlU3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIHRpcG86ICdzYXF1ZScsXHJcbiAgICAgICAgICBjYXRlZ29yaWE6ICdmaW5hbmNlaXJvJyxcclxuICAgICAgICAgIHZhbG9yOiB2YWxvcixcclxuICAgICAgICAgIGF1dG9yOiBhdXRvclNhcXVlLFxyXG4gICAgICAgICAgZGVzY3JpY2FvOiBgU2FxdWUgZGUgJCR7dmFsb3IudG9GaXhlZCgyKX1gLFxyXG4gICAgICAgICAgZGlzcGxheVRleHQ6IGBzYWNvdSBkbyBjYWl4YWBcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFBhcnNlIERFUMOTU0lUTyAoZGVwb3NpdCkgbWVzc2FnZXMgLSBmb3JtYXQ6IGphY2sgc3BhcnJvdyB2ZW5kZXUgNCBhbmltYWlzIG5vIG1hdGFkb3VybyBwb3IgJDE2MFxyXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ0RFUMOTU0lUTycpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ1ZhbG9yIGRlcG9zaXRhZG86JykpIHtcclxuICAgICAgY29uc3QgdmFsb3JNYXRjaCA9IGNvbnRlbnQubWF0Y2goL1ZhbG9yIGRlcG9zaXRhZG86XFxzKlxcJChbMC05LC5dKykvKTtcclxuICAgICAgY29uc3QgYWNhb01hdGNoID0gY29udGVudC5tYXRjaCgvQcOnw6NvOiguKz8pU2FsZG8gYXDDs3MgZGVww7NzaXRvOi8pO1xyXG4gICAgICBcclxuICAgICAgaWYgKHZhbG9yTWF0Y2ggJiYgYWNhb01hdGNoKSB7XHJcbiAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHZhbG9yTWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XHJcbiAgICAgICAgY29uc3QgYWNhbyA9IGFjYW9NYXRjaFsxXS50cmltKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXh0cmFjdCBhdXRob3IgZnJvbSBhY3Rpb24gXCJqYWNrIHNwYXJyb3cgdmVuZGV1IDQgYW5pbWFpcyBubyBtYXRhZG91cm9cIlxyXG4gICAgICAgIGNvbnN0IHZlbmRldU1hdGNoID0gYWNhby5tYXRjaCgvXiguKz8pXFxzK3ZlbmRldVxccysoXFxkKylcXHMrYW5pbWFpc1xccytub1xccyttYXRhZG91cm8vKTtcclxuICAgICAgICBpZiAodmVuZGV1TWF0Y2gpIHtcclxuICAgICAgICAgIGNvbnN0IGF1dG9yRGVwb3NpdG8gPSB2ZW5kZXVNYXRjaFsxXS50cmltKCk7XHJcbiAgICAgICAgICBjb25zdCBxdWFudGlkYWRlID0gdmVuZGV1TWF0Y2hbMl07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHBhcnNlU3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgdGlwbzogJ2RlcG9zaXRvJyxcclxuICAgICAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXHJcbiAgICAgICAgICAgIHZhbG9yOiB2YWxvcixcclxuICAgICAgICAgICAgYXV0b3I6IGF1dG9yRGVwb3NpdG8sXHJcbiAgICAgICAgICAgIGRlc2NyaWNhbzogYFZlbmRldSAke3F1YW50aWRhZGV9IGFuaW1haXMgbm8gbWF0YWRvdXJvYCxcclxuICAgICAgICAgICAgZGlzcGxheVRleHQ6IGB2ZW5kZXUgJHtxdWFudGlkYWRlfSBhbmltYWlzIG5vIG1hdGFkb3VybyBwb3JgXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBGYWxsYmFjayBmb3Igb3RoZXIgZGVwb3NpdCBhY3Rpb25zXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLm1lc3NhZ2UsXHJcbiAgICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICB0aXBvOiAnZGVwb3NpdG8nLFxyXG4gICAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXHJcbiAgICAgICAgICB2YWxvcjogdmFsb3IsXHJcbiAgICAgICAgICBhdXRvcjogJ1Npc3RlbWEnLFxyXG4gICAgICAgICAgZGVzY3JpY2FvOiBhY2FvLFxyXG4gICAgICAgICAgZGlzcGxheVRleHQ6IGBTaXN0ZW1hIGRlcG9zaXRvdSAkJHt2YWxvci50b0ZpeGVkKDIpfSBubyBjYWl4YWBcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbW9uZXlNYXRjaCA9IGNvbnRlbnQubWF0Y2gobW9uZXlQYXR0ZXJuKTtcclxuICAgIGlmIChtb25leU1hdGNoICYmIChjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RlcG9zaXQnKSB8fCBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NhcXVlJykgfHwgY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd2ZW5kZXUnKSkpIHtcclxuICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KG1vbmV5TWF0Y2hbMV0ucmVwbGFjZSgnLCcsICcnKSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgICBwYXJzZVN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgdGlwbzogY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzYXF1ZScpID8gJ3NhcXVlJyA6ICdkZXBvc2l0bycsXHJcbiAgICAgICAgY2F0ZWdvcmlhOiAnZmluYW5jZWlybycsXHJcbiAgICAgICAgdmFsb3I6IHZhbG9yLFxyXG4gICAgICAgIGF1dG9yOiBtZXNzYWdlLmF1dGhvciB8fCAnU2lzdGVtYScsXHJcbiAgICAgICAgZGlzcGxheVRleHQ6IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMCksXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFJldHVybiB1bnBhcnNlZCBtZXNzYWdlXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5tZXNzYWdlLFxyXG4gICAgICBwYXJzZVN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBjYXRlZ29yaWE6ICdzaXN0ZW1hJyxcclxuICAgICAgZGlzcGxheVRleHQ6IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMClcclxuICAgIH07XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUGFyc2UgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4ubWVzc2FnZSxcclxuICAgICAgcGFyc2VTdWNjZXNzOiBmYWxzZSxcclxuICAgICAgY2F0ZWdvcmlhOiAnc2lzdGVtYScsXHJcbiAgICAgIGRpc3BsYXlUZXh0OiBtZXNzYWdlLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVhZE1lc3NhZ2VzKCk7XHJcbiAgICBcclxuICAgIC8vIFBhcnNlIGFsbCBtZXNzYWdlcyBhbmQgcmV0dXJuIHBhcnNlZCBhY3Rpdml0aWVzXHJcbiAgICBjb25zdCBwYXJzZWRNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcChwYXJzZURpc2NvcmRNZXNzYWdlKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYPCfk4ogUGFyc2VkICR7cGFyc2VkTWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlcywgJHtwYXJzZWRNZXNzYWdlcy5maWx0ZXIobSA9PiBtLnBhcnNlU3VjY2VzcykubGVuZ3RofSBzdWNjZXNzZnVsbHkgcGFyc2VkYCk7XHJcbiAgICBcclxuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2VzOiBwYXJzZWRNZXNzYWdlcyxcclxuICAgICAgdG90YWw6IHBhcnNlZE1lc3NhZ2VzLmxlbmd0aCxcclxuICAgICAgbGFzdFVwZGF0ZWQ6IG1lc3NhZ2VzLmxlbmd0aCA+IDAgPyBtZXNzYWdlc1swXT8udGltZXN0YW1wIDogbnVsbCxcclxuICAgICAgcGFyc2VkOiBwYXJzZWRNZXNzYWdlcy5maWx0ZXIobSA9PiBtLnBhcnNlU3VjY2VzcykubGVuZ3RoXHJcbiAgICB9KSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIG1lc3NhZ2VzOicsIGVycm9yKTtcclxuICAgIHJldHVybiB3aXRoQ29ycyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gcmVhZCBtZXNzYWdlcycgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZnMiLCJwYXRoIiwiU1NFTWFuYWdlciIsImR5bmFtaWMiLCJjb3JzSGVhZGVycyIsIndpdGhDb3JzIiwicmVzcG9uc2UiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwiaGVhZGVycyIsInNldCIsIk1FU1NBR0VTX0ZJTEUiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImVuc3VyZVB1YmxpY0RpcmVjdG9yeSIsInB1YmxpY0RpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJyZWFkTWVzc2FnZXMiLCJmaWxlQ29udGVudCIsInJlYWRGaWxlU3luYyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsImVycm9yIiwiY29uc29sZSIsIndyaXRlTWVzc2FnZXMiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRvdGFsTWVzc2FnZXMiLCJsZW5ndGgiLCJ3cml0ZUZpbGVTeW5jIiwic3RyaW5naWZ5IiwibG9nIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImNoYW5uZWxJZCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJleGlzdGluZ01lc3NhZ2VzIiwiZXhpc3RpbmdJZHMiLCJTZXQiLCJtYXAiLCJtc2ciLCJpZCIsIm5ld01lc3NhZ2VzIiwiZmlsdGVyIiwiaGFzIiwibXNnVGltZXN0YW1wIiwidGltZXN0YW1wIiwiZ2V0VGltZSIsImR1cGxpY2F0ZUJ5VGltZSIsInNvbWUiLCJleGlzdGluZyIsIk1hdGgiLCJhYnMiLCJhdXRob3IiLCJtZXNzYWdlIiwidG90YWwiLCJhbGxNZXNzYWdlcyIsInJlY2VudE1lc3NhZ2VzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJub3RpZmljYXRpb25GaWxlIiwidXBkYXRlSW5mbyIsImxhc3RVcGRhdGUiLCJub3ciLCJnZXRJbnN0YW5jZSIsIm5vdGlmeUFsbCIsInR5cGUiLCJjb3VudCIsInNzZUVycm9yIiwid2FybiIsIk9QVElPTlMiLCJSZXNwb25zZSIsInBhcnNlRGlzY29yZE1lc3NhZ2UiLCJjb250ZW50IiwidHJpbSIsImNhaXhhTWF0Y2giLCJtYXRjaCIsInRyYW5zYWN0aW9uVHlwZSIsImFjdGlvblBhcnQiLCJhdXRvciIsImRlcG9zaXRXaXRoQWN0aW9uTWF0Y2giLCJ2YWxvciIsInBhcnNlRmxvYXQiLCJyZXBsYWNlIiwiYWNhbyIsInNhbGRvIiwicGFyc2VTdWNjZXNzIiwidGlwbyIsImNhdGVnb3JpYSIsImRlc2NyaWNhbyIsImRpc3BsYXlUZXh0IiwidG9GaXhlZCIsImNvbmZpZGVuY2UiLCJ3aXRoZHJhd01hdGNoIiwic3BpZGV5Qm90TWF0Y2giLCJhZGRNYXRjaCIsIml0ZW0iLCJxdWFudGlkYWRlIiwicGFyc2VJbnQiLCJyZW1vdmVNYXRjaCIsIml0ZW1BZGRQYXR0ZXJuIiwiaXRlbVJlbW92ZVBhdHRlcm4iLCJtb25leVBhdHRlcm4iLCJpbmNsdWRlcyIsInZhbG9yTWF0Y2giLCJhdXRvck1hdGNoIiwiYXV0b3JTYXF1ZSIsImFjYW9NYXRjaCIsInZlbmRldU1hdGNoIiwiYXV0b3JEZXBvc2l0byIsIm1vbmV5TWF0Y2giLCJ0b0xvd2VyQ2FzZSIsInN1YnN0cmluZyIsIkdFVCIsInBhcnNlZE1lc3NhZ2VzIiwibSIsInBhcnNlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webhook/channel-messages/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/webhook/sse-manager.ts":
/*!****************************************!*\
  !*** ./app/api/webhook/sse-manager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Global SSE client manager\nclass SSEManager {\n    constructor(){\n        this.clients = new Set();\n    }\n    static getInstance() {\n        if (!SSEManager.instance) {\n            SSEManager.instance = new SSEManager();\n        }\n        return SSEManager.instance;\n    }\n    addClient(controller) {\n        this.clients.add(controller);\n        console.log(`📡 SSE client connected. Total clients: ${this.clients.size}`);\n    }\n    removeClient(controller) {\n        this.clients.delete(controller);\n        console.log(`📡 SSE client disconnected. Total clients: ${this.clients.size}`);\n    }\n    notifyAll(data) {\n        const message = `data: ${JSON.stringify(data)}\\n\\n`;\n        const encoder = new TextEncoder();\n        const encoded = encoder.encode(message);\n        console.log(`📢 Notifying ${this.clients.size} SSE clients:`, data);\n        this.clients.forEach((controller)=>{\n            try {\n                controller.enqueue(encoded);\n            } catch (error) {\n                console.error(\"Failed to send to client, removing:\", error);\n                this.clients.delete(controller);\n            }\n        });\n    }\n    getClientCount() {\n        return this.clients.size;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SSEManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3dlYmhvb2svc3NlLW1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLDRCQUE0QjtBQUM1QixNQUFNQTtJQUlKLGFBQXNCO1FBQ3BCLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlDO0lBQ3JCO0lBRUEsT0FBT0MsY0FBMEI7UUFDL0IsSUFBSSxDQUFDSCxXQUFXSSxRQUFRLEVBQUU7WUFDeEJKLFdBQVdJLFFBQVEsR0FBRyxJQUFJSjtRQUM1QjtRQUNBLE9BQU9BLFdBQVdJLFFBQVE7SUFDNUI7SUFFQUMsVUFBVUMsVUFBMkMsRUFBUTtRQUMzRCxJQUFJLENBQUNMLE9BQU8sQ0FBQ00sR0FBRyxDQUFDRDtRQUNqQkUsUUFBUUMsR0FBRyxDQUFDLENBQUMsd0NBQXdDLEVBQUUsSUFBSSxDQUFDUixPQUFPLENBQUNTLElBQUksQ0FBQyxDQUFDO0lBQzVFO0lBRUFDLGFBQWFMLFVBQTJDLEVBQVE7UUFDOUQsSUFBSSxDQUFDTCxPQUFPLENBQUNXLE1BQU0sQ0FBQ047UUFDcEJFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJDQUEyQyxFQUFFLElBQUksQ0FBQ1IsT0FBTyxDQUFDUyxJQUFJLENBQUMsQ0FBQztJQUMvRTtJQUVBRyxVQUFVQyxJQUFTLEVBQVE7UUFDekIsTUFBTUMsVUFBVSxDQUFDLE1BQU0sRUFBRUMsS0FBS0MsU0FBUyxDQUFDSCxNQUFNLElBQUksQ0FBQztRQUNuRCxNQUFNSSxVQUFVLElBQUlDO1FBQ3BCLE1BQU1DLFVBQVVGLFFBQVFHLE1BQU0sQ0FBQ047UUFFL0JQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUNSLE9BQU8sQ0FBQ1MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFSTtRQUU5RCxJQUFJLENBQUNiLE9BQU8sQ0FBQ3FCLE9BQU8sQ0FBQ2hCLENBQUFBO1lBQ25CLElBQUk7Z0JBQ0ZBLFdBQVdpQixPQUFPLENBQUNIO1lBQ3JCLEVBQUUsT0FBT0ksT0FBTztnQkFDZGhCLFFBQVFnQixLQUFLLENBQUMsdUNBQXVDQTtnQkFDckQsSUFBSSxDQUFDdkIsT0FBTyxDQUFDVyxNQUFNLENBQUNOO1lBQ3RCO1FBQ0Y7SUFDRjtJQUVBbUIsaUJBQXlCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDeEIsT0FBTyxDQUFDUyxJQUFJO0lBQzFCO0FBQ0Y7QUFFQSxpRUFBZVYsVUFBVUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JlZG0tZGFzaGJvYXJkLy4vYXBwL2FwaS93ZWJob29rL3NzZS1tYW5hZ2VyLnRzP2JkYzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2xvYmFsIFNTRSBjbGllbnQgbWFuYWdlclxuY2xhc3MgU1NFTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBTU0VNYW5hZ2VyO1xuICBwcml2YXRlIGNsaWVudHM6IFNldDxSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPjtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50cyA9IG5ldyBTZXQoKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBTU0VNYW5hZ2VyIHtcbiAgICBpZiAoIVNTRU1hbmFnZXIuaW5zdGFuY2UpIHtcbiAgICAgIFNTRU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgU1NFTWFuYWdlcigpO1xuICAgIH1cbiAgICByZXR1cm4gU1NFTWFuYWdlci5pbnN0YW5jZTtcbiAgfVxuXG4gIGFkZENsaWVudChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKTogdm9pZCB7XG4gICAgdGhpcy5jbGllbnRzLmFkZChjb250cm9sbGVyKTtcbiAgICBjb25zb2xlLmxvZyhg8J+ToSBTU0UgY2xpZW50IGNvbm5lY3RlZC4gVG90YWwgY2xpZW50czogJHt0aGlzLmNsaWVudHMuc2l6ZX1gKTtcbiAgfVxuXG4gIHJlbW92ZUNsaWVudChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKTogdm9pZCB7XG4gICAgdGhpcy5jbGllbnRzLmRlbGV0ZShjb250cm9sbGVyKTtcbiAgICBjb25zb2xlLmxvZyhg8J+ToSBTU0UgY2xpZW50IGRpc2Nvbm5lY3RlZC4gVG90YWwgY2xpZW50czogJHt0aGlzLmNsaWVudHMuc2l6ZX1gKTtcbiAgfVxuXG4gIG5vdGlmeUFsbChkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9XFxuXFxuYDtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgY29uc3QgZW5jb2RlZCA9IGVuY29kZXIuZW5jb2RlKG1lc3NhZ2UpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OiIE5vdGlmeWluZyAke3RoaXMuY2xpZW50cy5zaXplfSBTU0UgY2xpZW50czpgLCBkYXRhKTtcbiAgICBcbiAgICB0aGlzLmNsaWVudHMuZm9yRWFjaChjb250cm9sbGVyID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVkKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIHRvIGNsaWVudCwgcmVtb3Zpbmc6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLmNsaWVudHMuZGVsZXRlKGNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q2xpZW50Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRzLnNpemU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU1NFTWFuYWdlcjsiXSwibmFtZXMiOlsiU1NFTWFuYWdlciIsImNsaWVudHMiLCJTZXQiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiYWRkQ2xpZW50IiwiY29udHJvbGxlciIsImFkZCIsImNvbnNvbGUiLCJsb2ciLCJzaXplIiwicmVtb3ZlQ2xpZW50IiwiZGVsZXRlIiwibm90aWZ5QWxsIiwiZGF0YSIsIm1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5jb2RlciIsIlRleHRFbmNvZGVyIiwiZW5jb2RlZCIsImVuY29kZSIsImZvckVhY2giLCJlbnF1ZXVlIiwiZXJyb3IiLCJnZXRDbGllbnRDb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webhook/sse-manager.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&page=%2Fapi%2Fwebhook%2Fchannel-messages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhook%2Fchannel-messages%2Froute.ts&appDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjizar%5COneDrive%5CDocuments%5CDiscordBot%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();